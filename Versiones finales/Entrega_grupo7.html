<!DOCTYPE html>
<html lang="en"><head>
<script src="Entrega_grupo7_files/libs/clipboard/clipboard.min.js"></script>
<script src="Entrega_grupo7_files/libs/quarto-html/tabby.min.js"></script>
<script src="Entrega_grupo7_files/libs/quarto-html/popper.min.js"></script>
<script src="Entrega_grupo7_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Entrega_grupo7_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Entrega_grupo7_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="Entrega_grupo7_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="Entrega_grupo7_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Mario Camacho, Diana Cáceres, Vicente Pantoja-Maggi">
  <title>Entrega grupo 7</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Entrega_grupo7_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Entrega_grupo7_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="Entrega_grupo7_files/libs/revealjs/dist/theme/quarto.css">
  <link href="Entrega_grupo7_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Entrega_grupo7_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Entrega_grupo7_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Entrega_grupo7_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Entrega grupo 7</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Mario Camacho, Diana Cáceres, Vicente Pantoja-Maggi 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Índice</h2>
<ul>
<li></li>
<li><a href="#/inicio" id="/toc-inicio">Inicio</a>
<ul>
<li><a href="#/datos-elecciones" id="/toc-datos-elecciones">DATOS ELECCIONES</a></li>
<li><a href="#/datos-elecciones-1" id="/toc-datos-elecciones-1">Datos elecciones</a></li>
<li><a href="#/datos-elecciones-2" id="/toc-datos-elecciones-2">Datos elecciones</a></li>
<li><a href="#/códigos-municipios" id="/toc-códigos-municipios">CÓDIGOS MUNICIPIOS</a></li>
<li><a href="#/siglas" id="/toc-siglas">SIGLAS</a></li>
<li><a href="#/siglas-1" id="/toc-siglas-1">Siglas</a></li>
<li><a href="#/siglas-2" id="/toc-siglas-2">Siglas</a></li>
<li><a href="#/siglas-3" id="/toc-siglas-3">Siglas</a></li>
<li><a href="#/limpieza-de-datos" id="/toc-limpieza-de-datos">LIMPIEZA DE DATOS</a></li>
<li><a href="#/limpieza-de-datos-1" id="/toc-limpieza-de-datos-1">Limpieza de datos</a></li>
<li><a href="#/limpieza-de-datos-2" id="/toc-limpieza-de-datos-2">Limpieza de datos</a></li>
<li><a href="#/limpieza-de-datos-3" id="/toc-limpieza-de-datos-3">Limpieza de datos</a></li>
<li><a href="#/limpieza-de-datos-4" id="/toc-limpieza-de-datos-4">Limpieza de datos</a></li>
<li><a href="#/encuestas" id="/toc-encuestas">ENCUESTAS</a></li>
<li><a href="#/encuestas-1" id="/toc-encuestas-1">Encuestas</a></li>
<li><a href="#/encuestas-2" id="/toc-encuestas-2">Encuestas</a></li>
</ul></li>
<li><a href="#/análisis-de-votaciones---palabras-previas" id="/toc-análisis-de-votaciones---palabras-previas">Análisis de votaciones - palabras previas</a>
<ul>
<li><a href="#/análisis-de-votaciones---palabras-previas-1" id="/toc-análisis-de-votaciones---palabras-previas-1">Análisis de votaciones - palabras previas</a></li>
<li><a href="#/análisis-de-votaciones---palabras-previas-2" id="/toc-análisis-de-votaciones---palabras-previas-2">Análisis de votaciones - palabras previas</a></li>
<li><a href="#/análisis-de-votaciones---palabras-previas-3" id="/toc-análisis-de-votaciones---palabras-previas-3">Análisis de votaciones - palabras previas</a></li>
</ul></li>
<li><a href="#/análisis-de-votaciones-en-españa-en-el-rango-2.008---2.019" id="/toc-análisis-de-votaciones-en-españa-en-el-rango-2.008---2.019">Análisis de votaciones en España en el rango 2.008 - 2.019</a>
<ul>
<li><a href="#/distribución-de-votos" id="/toc-distribución-de-votos">Distribución de votos</a></li>
<li><a href="#/bipartidismo" id="/toc-bipartidismo">Bipartidismo</a></li>
<li><a href="#/votaciones-en-municipios-con-mayor-censo" id="/toc-votaciones-en-municipios-con-mayor-censo">Votaciones en municipios con mayor censo</a></li>
<li><a href="#/votaciones-en-municipios-con-mayor-censo-1" id="/toc-votaciones-en-municipios-con-mayor-censo-1">Votaciones en municipios con mayor censo</a></li>
<li><a href="#/partido-ganador-por-elección" id="/toc-partido-ganador-por-elección">Partido ganador por elección</a></li>
<li><a href="#/partido-ganador-por-elección-1" id="/toc-partido-ganador-por-elección-1">Partido ganador por elección</a></li>
<li><a href="#/partido-ganador-por-elección-2" id="/toc-partido-ganador-por-elección-2">Partido ganador por elección</a></li>
<li><a href="#/partido-ganador-por-elección-3" id="/toc-partido-ganador-por-elección-3">Partido ganador por elección</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido" id="/toc-diferencias-entre-primer-y-segundo-partido">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-1" id="/toc-diferencias-entre-primer-y-segundo-partido-1">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-2" id="/toc-diferencias-entre-primer-y-segundo-partido-2">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-3" id="/toc-diferencias-entre-primer-y-segundo-partido-3">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-4" id="/toc-diferencias-entre-primer-y-segundo-partido-4">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-5" id="/toc-diferencias-entre-primer-y-segundo-partido-5">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-6" id="/toc-diferencias-entre-primer-y-segundo-partido-6">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-7" id="/toc-diferencias-entre-primer-y-segundo-partido-7">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-8" id="/toc-diferencias-entre-primer-y-segundo-partido-8">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-9" id="/toc-diferencias-entre-primer-y-segundo-partido-9">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-partido-10" id="/toc-diferencias-entre-primer-y-segundo-partido-10">Diferencias entre primer y segundo partido</a></li>
<li><a href="#/nivel-de-participación-y-favorecidos" id="/toc-nivel-de-participación-y-favorecidos">Nivel de participación y favorecidos</a></li>
<li><a href="#/nivel-de-participación-y-favorecidos-1" id="/toc-nivel-de-participación-y-favorecidos-1">Nivel de participación y favorecidos</a></li>
<li><a href="#/nivel-de-participación-y-favorecidos-2" id="/toc-nivel-de-participación-y-favorecidos-2">Nivel de participación y favorecidos</a></li>
<li><a href="#/nivel-de-participación-y-favorecidos-3" id="/toc-nivel-de-participación-y-favorecidos-3">Nivel de participación y favorecidos</a></li>
<li><a href="#/nivel-de-participación-y-favorecidos-4" id="/toc-nivel-de-participación-y-favorecidos-4">Nivel de participación y favorecidos</a></li>
<li><a href="#/nivel-de-participación-y-favorecidos-5" id="/toc-nivel-de-participación-y-favorecidos-5">Nivel de participación y favorecidos</a></li>
</ul></li>
<li><a href="#/fin" id="/toc-fin">FIN</a>
<ul>
<li><a href="#/parte-de-mario" id="/toc-parte-de-mario">Parte de Mario</a></li>
</ul></li>
<li><a href="#/mario-creo-que-acá-queda-mejor-un-solo-gráfico-de-barras-con-2-colores-uno-encima-del-otro-como-el-chunk-36" id="/toc-mario-creo-que-acá-queda-mejor-un-solo-gráfico-de-barras-con-2-colores-uno-encima-del-otro-como-el-chunk-36">Mario creo que acá queda mejor un solo gráfico de barras, con 2 colores uno encima del otro (como el chunk 36)</a>
<ul>
<li><a href="#/nivel-de-participación-y-favorecidos-6" id="/toc-nivel-de-participación-y-favorecidos-6">Nivel de participación y favorecidos</a></li>
<li><a href="#/continuación" id="/toc-continuación">Continuación</a></li>
<li><a href="#/bipartidismo-en-las-cámaras" id="/toc-bipartidismo-en-las-cámaras">Bipartidismo en las cámaras</a></li>
<li><a href="#/diferencias-entre-primer-y-segundo-lugar" id="/toc-diferencias-entre-primer-y-segundo-lugar">Diferencias entre primer y segundo lugar</a></li>
<li><a href="#/caso-municipios" id="/toc-caso-municipios">Caso municipios</a></li>
<li><a href="#/diferencias-a-nivel-provincial" id="/toc-diferencias-a-nivel-provincial">Diferencias a nivel provincial</a></li>
<li><a href="#/diferencias-a-nivel-comunidad-autónoma" id="/toc-diferencias-a-nivel-comunidad-autónoma">Diferencias a nivel comunidad autónoma</a></li>
<li><a href="#/votos-nulos" id="/toc-votos-nulos">Votos nulos</a></li>
</ul></li>
<li><a href="#/participación" id="/toc-participación">Participación</a>
<ul>
<li><a href="#/peso-de-no-votantes-versus-el-total-de-votos" id="/toc-peso-de-no-votantes-versus-el-total-de-votos">Peso de no votantes versus el total de votos</a></li>
</ul></li>
<li><a href="#/participación-mario-dejaría-lo-tuyo-en-vez-de-esto" id="/toc-participación-mario-dejaría-lo-tuyo-en-vez-de-esto">Participación MARIO: dejaría lo tuyo en vez de esto</a>
<ul>
<li><a href="#/municipios-de-mayor-participación" id="/toc-municipios-de-mayor-participación">Municipios de mayor participación</a></li>
<li><a href="#/menor-participación" id="/toc-menor-participación">Menor participación</a></li>
<li><a href="#/partidos-beneficiados-por-menor-y-mayor-participación" id="/toc-partidos-beneficiados-por-menor-y-mayor-participación">Partidos beneficiados por menor y mayor participación</a></li>
</ul></li>
<li><a href="#/encuestas-3" id="/toc-encuestas-3">Encuestas</a>
<ul>
<li><a href="#/encuestas-menos-precisas" id="/toc-encuestas-menos-precisas">Encuestas menos precisas</a></li>
<li><a href="#/error-de-encuestas-en-partidos-de-ámbito-nacional" id="/toc-error-de-encuestas-en-partidos-de-ámbito-nacional">Error de encuestas en partidos de ámbito nacional</a></li>
<li><a href="#/casas-encuestadoras" id="/toc-casas-encuestadoras">Casas encuestadoras</a></li>
</ul></li>
</ul>
</nav>
</section>
<section class="slide level2">

<blockquote>
<p>Introduce en el chunk inferior los paquetes que vayas a necesitar</p>
</blockquote>
<p>La práctica versará entorno a los <strong>archivos de datos electorales</strong> que ya hemos trabajado, recopilando datos de citas electorales al Congreso de los Diputados de España desde 2008 hasta 2019.</p>
</section>
<section>
<section id="inicio" class="title-slide slide level1 center">
<h1>Inicio</h1>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://raw.githubusercontent.com/MarioC0093/Software_GRUPAL_7/main/Versiones%20finales/imagenes/lista_paquete.JPG"></p>
<figcaption>Rista de paquetes</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># remotes::install_github("davidsjoberg/ggsankey")</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># Cargar librerias </span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(skimr)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(stringi)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(showtext)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="fu">library</span>(microbenchmark)</span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="fu">library</span>(ggparliament)</span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="fu">library</span>(ggsankey)</span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="fu">library</span>(ggbreak)</span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="fu">library</span>(magick)</span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="fu">library</span>(outliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p>La práctica versará entorno a los <strong>archivos de datos electorales</strong> que ya hemos trabajado, recopilando datos de citas electorales al Congreso de los Diputados de España desde 2.008 hasta la 2.019.</p>
</div><div class="column" style="width:50%;">
<p>Para el desarrollo del presente trabajo, se han considerado las siguientes bases de datos:</p>
<ul>
<li><p><code>datos_elecciones</code>: archivo con los datos electorales al Congreso desde 2.008 hasta las dos de 2.019.</p></li>
<li><p><code>cod_mun</code>: archivo con los códigos y nombres de cada municipio</p></li>
<li><p><code>siglas</code>: siglas y nombres asociados a cada partido</p></li>
<li><p><code>encuestas</code>: tabla de encuestas electorales desde 1.982.</p></li>
</ul>
</div>
</div>
</section>
<section id="datos-elecciones" class="slide level2">
<h2>DATOS ELECCIONES</h2>
<p>Esta base de datoses un tibble de 48.737 x 471 lo que impide su comprensión y un correcto análisis de datos.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 471
  tipo_eleccion  anno mes   vuelta codigo_ccaa codigo_provincia codigo_municipio
  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;           
1 02             2008 03         1 14          01               001             
2 02             2008 03         1 14          01               002             
3 02             2008 03         1 14          01               003             
4 02             2008 03         1 14          01               004             
5 02             2008 03         1 14          01               006             
6 02             2008 03         1 14          01               008             
# ℹ 464 more variables: codigo_distrito_electoral &lt;dbl&gt;, numero_mesas &lt;dbl&gt;,
#   censo &lt;dbl&gt;, participacion_1 &lt;dbl&gt;, participacion_2 &lt;dbl&gt;,
#   votos_blancos &lt;dbl&gt;, votos_nulos &lt;dbl&gt;, votos_candidaturas &lt;dbl&gt;,
#   `BERDEAK-LOS VERDES` &lt;dbl&gt;, ARALAR &lt;dbl&gt;,
#   `PARTIDO OBRERO SOCIALISTA INTERNACIONALISTA` &lt;dbl&gt;,
#   `ALTERNATIVA MOTOR Y DEPORTES` &lt;dbl&gt;, `PARTIDO HUMANISTA` &lt;dbl&gt;,
#   `PARTIDO POPULAR` &lt;dbl&gt;, `EZKER BATUA-BERDEAK-ALTERNATIVA` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<div class="columns">
<div class="column" style="width:33%;">
<ul>
<li>Es preferible una columna con todos los partidos políticos y otra con el número de votos de cada uno en cada municipio en cada una de las elecciones.</li>
</ul>
</div><div class="column" style="width:34%;">
<ul>
<li>Se eliminan los valores NA, ya que estos registros hacen referencia a partidos que no han recibido votos en esas elecciones.</li>
</ul>
</div><div class="column" style="width:33%;">
<ul>
<li>También se eliminan aquellas columnas que no aportan información, es decir, aquellas que tengan un único valor.</li>
</ul>
</div>
</div>
<p></p>
</section>
<section id="datos-elecciones-1" class="slide level2">
<h2>Datos elecciones</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Se eliminan las columnas:</p>
<ul>
<li><p>tipo_eleccion: valor constante 02.</p></li>
<li><p>codigo_distrito_electoral: valor constante 0.</p></li>
<li><p>vuelta: valor constante 1.</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> tipo_eleccion          vuelta  codigo_distrito_electoral
 Length:48737       Min.   :1   Min.   :0                
 Class :character   1st Qu.:1   1st Qu.:0                
 Mode  :character   Median :1   Median :0                
                    Mean   :1   Mean   :0                
                    3rd Qu.:1   3rd Qu.:0                
                    Max.   :1   Max.   :0                </code></pre>
</div>
</div>
</div>
</div>
<p>Se obtiene un tibble de 396.735 x 14.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 14
   anno mes   codigo_ccaa codigo_provincia codigo_municipio numero_mesas censo
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;                   &lt;dbl&gt; &lt;dbl&gt;
1  2008 03    14          01               001                         2  1838
2  2008 03    14          01               001                         2  1838
3  2008 03    14          01               001                         2  1838
4  2008 03    14          01               001                         2  1838
5  2008 03    14          01               001                         2  1838
6  2008 03    14          01               001                         2  1838
# ℹ 7 more variables: participacion_1 &lt;dbl&gt;, participacion_2 &lt;dbl&gt;,
#   votos_blancos &lt;dbl&gt;, votos_nulos &lt;dbl&gt;, votos_candidaturas &lt;dbl&gt;,
#   partido_politico &lt;chr&gt;, votos &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="datos-elecciones-2" class="slide level2">
<h2>Datos elecciones</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Comprobamos que el número mínimo de votos es 1.</p>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
     1.0      3.0     14.0    371.5     93.0 919701.0 </code></pre>
</div>
</div>
</div>
</div>
<p>Por lo que un valor NA no significa que sea un dato faltante si no que no ha recibido ningún voto y por lo tanto tiene sentido haber eliminado los NA de la nueva columna votos.</p>
<p>Se crean dos nuevas columnas.</p>
<ul>
<li><em>fecha</em> (identificador de las elecciones)</li>
<li><em>id_mun</em> (funciona como id para unir las bases de datos datos_elecciones y cod_mun)</li>
</ul>
<p>Se eliminan las columnas <em>anno</em>, <em>mes</em>, <em>codigo_provincia</em> y <em>codigo_municipio”</em> dado que se han creado las nuevas variables con estos datos pero se mantiene la columna <em>codigo_ccaa</em>.</p>
</section>
<section id="códigos-municipios" class="slide level2">
<h2>CÓDIGOS MUNICIPIOS</h2>
<p>Unimos las tablas <em>datos_elecciones</em> y <em>cod_mun</em> a fin de que en la base final aparezca el nombre de los municipios.</p>
<p>La unificación estas dos bases de datos es necesaria para poder realizar análisis geográficos.</p>
</section>
<section id="siglas" class="slide level2">
<h2>SIGLAS</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Se normalizan las siglas de los partidos políticos. Por ejemplo, tres denominaciones de Convergència i Unió se unifican en unas únicas siglas para agrupar la información de este partido.</p>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  denominacion                          siglas siglas_new
  &lt;chr&gt;                                 &lt;chr&gt;  &lt;chr&gt;     
1 CONVERGENCIA I UNIO                   CIU    CiU       
2 CONVERGENCIA i UNIO                   CiU    CiU       
3 CONVERGÈNCIA DEMOCRÀTICA DE CATALUNYA CDC    CiU       </code></pre>
</div>
</div>
</div>
</div>
<p>Se realiza la siguiente normalización:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>siglas <span class="ot">&lt;-</span> siglas <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">mutate</span>(<span class="at">siglas=</span><span class="fu">case_when</span>(<span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(denominacion), <span class="st">".*part.*popul|pp"</span>) <span class="sc">~</span> <span class="st">"PP"</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>                          <span class="co"># P.P-E.U. nos interesa como PP</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>                          <span class="co"># listas conjuntas con el Partido Popular en las elecciones municipales y autonómicas de 2007</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>                          <span class="co"># en las elecciones generales de 2011 se presentó en coalición con el Partido Popular</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(denominacion), <span class="st">"^part.*socialist|^socialist.*teruel"</span>) <span class="sc">~</span> <span class="st">"PSOE"</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(denominacion), <span class="st">"^ciudadanos.*partido|^ciutadans"</span>) <span class="sc">~</span> <span class="st">"C's"</span>,</span>
<span id="cb7-8"><a href="#cb7-8"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(denominacion), <span class="st">"vasco"</span>) <span class="sc">~</span> <span class="st">"PNV"</span>,</span>
<span id="cb7-9"><a href="#cb7-9"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(siglas), <span class="st">"bng"</span>) <span class="sc">~</span> <span class="st">"BNG"</span>,</span>
<span id="cb7-10"><a href="#cb7-10"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(siglas), <span class="st">"comprom"</span>) <span class="sc">&amp;</span></span>
<span id="cb7-11"><a href="#cb7-11"></a>                            <span class="sc">!</span><span class="fu">str_detect</span>(siglas,<span class="st">"^0-9"</span>)<span class="sc">~</span> <span class="st">"COMPROMÍS"</span>, <span class="co"># para evitar COMPROMÍS 2</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(denominacion), <span class="st">"^conver.*uni|^conver.*cata"</span>) <span class="sc">~</span> <span class="st">"CiU"</span>,</span>
<span id="cb7-13"><a href="#cb7-13"></a>                          <span class="co"># El 19 de septiembre de 1978 [Convergencia Democrática de Cataluña] se coalizó con Unió Democràtica de Catalunya</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>                          <span class="co"># El 18 de junio de 2015 Convergència Democràtica de Catalunya anunció el fin de Convergència i Unió </span></span>
<span id="cb7-15"><a href="#cb7-15"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(denominacion), <span class="st">"VERDES|PODEM|EZKER|COMUNISTA|ZQUIERDA REPUBLICANA</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="st">                                     |VERDS|IZQUIERDA UNIDA|EN MAREA|UNIDAD POPULAR|EQUO"</span>) <span class="sc">&amp;</span> <span class="co"># importante que el | esté en esta línea y no al final de la anterior</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>                            <span class="sc">!</span><span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(denominacion, <span class="at">id =</span> <span class="st">"Latin-ASCII"</span>)), <span class="st">"MAS PAIS"</span>) <span class="sc">~</span> <span class="st">"UP"</span>,</span>
<span id="cb7-18"><a href="#cb7-18"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(siglas), <span class="st">"erc"</span>) <span class="sc">|</span></span>
<span id="cb7-19"><a href="#cb7-19"></a>                            <span class="fu">str_detect</span>(<span class="fu">tolower</span>(denominacion), <span class="st">"esquerra republicana"</span>) <span class="sc">~</span> <span class="st">"ERC"</span>,</span>
<span id="cb7-20"><a href="#cb7-20"></a>                          <span class="co"># FRONT PEL PAIS VALENCIA-ERC --&gt; ERC</span></span>
<span id="cb7-21"><a href="#cb7-21"></a>                          <span class="co"># https://www.vilaweb.cat/noticia/1142933/20000710/front-pais-valencia-fusionara-erc.pdf</span></span>
<span id="cb7-22"><a href="#cb7-22"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(denominacion), <span class="st">"EH|EUSKO|ARALAR"</span>) <span class="sc">|</span> </span>
<span id="cb7-23"><a href="#cb7-23"></a>                            <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(siglas), <span class="st">"EH|EUSKO|ARALAR"</span>)<span class="sc">~</span> <span class="st">"EH - BILDU"</span>,</span>
<span id="cb7-24"><a href="#cb7-24"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(denominacion, <span class="at">id =</span> <span class="st">"Latin-ASCII"</span>)), <span class="st">"MAS PAIS"</span>) <span class="sc">~</span> <span class="st">"MÁS PAÍS"</span>,</span>
<span id="cb7-25"><a href="#cb7-25"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(denominacion), <span class="st">"VOX"</span>) <span class="sc">~</span> <span class="st">"VOX"</span>,</span>
<span id="cb7-26"><a href="#cb7-26"></a>                          <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Otros"</span>),</span>
<span id="cb7-27"><a href="#cb7-27"></a>         <span class="at">.after =</span> denominacion)</span>
<span id="cb7-28"><a href="#cb7-28"></a></span>
<span id="cb7-29"><a href="#cb7-29"></a>siglas <span class="ot">&lt;-</span> siglas <span class="sc">|&gt;</span>  </span>
<span id="cb7-30"><a href="#cb7-30"></a>  <span class="fu">select</span>(denominacion, siglas) <span class="sc">|&gt;</span>  </span>
<span id="cb7-31"><a href="#cb7-31"></a>  <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="siglas-1" class="slide level2">
<h2>Siglas</h2>
<p>Se procede a añadir las siglas de los partidos a la tabla de datos_encuestas.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 121 × 2
   partido_politico                                                       siglas
   &lt;chr&gt;                                                                  &lt;chr&gt; 
 1 ALTERNATIVA MOTOR Y DEPORTE                                            &lt;NA&gt;  
 2 BIDEZKO MUNDURANTZ-POR UN MUNDO MÁS JUSTO                              &lt;NA&gt;  
 3 BIDEZKO MUNDURANTZ/POR UN MUNDO MAS JUSTO                              &lt;NA&gt;  
 4 CHUNTA ARAGONESISTA-IZQUIERDA UNIDA, La Izquierda de Aragón: La Izqui… &lt;NA&gt;  
 5 CIUDADANOS PARTIDO DE LA CIUDADANIA                                    &lt;NA&gt;  
 6 CIUDADANOS PARTIDO DE LA CIUDADANÍA                                    &lt;NA&gt;  
 7 CIUDADANOS, PARTIDO DE LA CIUDADANÍA                                   &lt;NA&gt;  
 8 CIUDADANOS-PARTIDO DE LA CIUDADANÍA (C's)                              &lt;NA&gt;  
 9 CIUTADANS - PARTIDO DE LA CIUDADANÍA                                   &lt;NA&gt;  
10 CIUTADANS, PARTIDO DE LA CIUDADANÍA                                    &lt;NA&gt;  
# ℹ 111 more rows</code></pre>
</div>
</div>
<p>No todos los partidos políticos de la base de datos de elecciones se encuentran en la base de datos de siglas.</p>
<p>La tabla de dimensiones <em>siglas</em> no nos es útil por no abarcar todas las casuísticas de la tabla de hechos. Realizamos la normalización directamente sobre la base de datos de <em>elecciones</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>datos_elecciones <span class="ot">&lt;-</span> datos_elecciones <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">mutate</span>(<span class="at">siglas =</span> <span class="fu">case_when</span>(<span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">".*part.*popul|pp"</span>) <span class="sc">~</span> <span class="st">"PP"</span>,</span>
<span id="cb9-3"><a href="#cb9-3"></a>                          <span class="co"># P.P-E.U. nos interesa como PP</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>                          <span class="co"># listas conjuntas con el Partido Popular en las elecciones municipales y autonómicas de 2007</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>                          <span class="co"># en las elecciones generales de 2011 se presentó en coalición con el Partido Popular</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">"^part.*socialist|^socialist.*teruel"</span>) <span class="sc">~</span> <span class="st">"PSOE"</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">"^ciudadanos.*partido|^ciutadans"</span>) <span class="sc">~</span> <span class="st">"C's"</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">"vasco"</span>) <span class="sc">~</span> <span class="st">"PNV"</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">"galego"</span>) <span class="sc">~</span> <span class="st">"BNG"</span>,</span>
<span id="cb9-10"><a href="#cb9-10"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">"comprom"</span>) <span class="sc">&amp;</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>                            <span class="sc">!</span><span class="fu">str_detect</span>(partido_politico,<span class="st">"^0-9"</span>)<span class="sc">~</span> <span class="st">"COMPROMÍS"</span>, <span class="co"># para evitar COMPROMÍS 2</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">"^conver.*uni|^conver.*cata"</span>) <span class="sc">~</span> <span class="st">"CiU"</span>,</span>
<span id="cb9-13"><a href="#cb9-13"></a>                          <span class="co"># El 19 de septiembre de 1978 [Convergencia Democrática de Cataluña] se coalizó con Unió Democràtica de Catalunya</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>                          <span class="co"># El 18 de junio de 2015 Convergència Democràtica de Catalunya anunció el fin de Convergència i Unió </span></span>
<span id="cb9-15"><a href="#cb9-15"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(partido_politico), <span class="st">"VERDES|PODEM|EZKER|COMUNISTA|ZQUIERDA REPUBLICANA</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="st">                                     |VERDS|IZQUIERDA UNIDA|EN MAREA|UNIDAD POPULAR|EQUO"</span>) <span class="sc">&amp;</span> <span class="co"># importante que el | esté en esta línea y no al final de la anterior</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>                            <span class="sc">!</span><span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(partido_politico, <span class="at">id =</span> <span class="st">"Latin-ASCII"</span>)), <span class="st">"MAS PAIS"</span>) <span class="sc">~</span> <span class="st">"UP"</span>,</span>
<span id="cb9-18"><a href="#cb9-18"></a>                          partido_politico <span class="sc">==</span> <span class="st">"IU"</span> <span class="sc">~</span> <span class="st">"UP"</span>,</span>
<span id="cb9-19"><a href="#cb9-19"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(partido_politico), <span class="st">"erc"</span>) <span class="sc">|</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>                            <span class="fu">str_detect</span>(<span class="fu">tolower</span>(partido_politico), <span class="st">"esquerra republicana"</span>) <span class="sc">~</span> <span class="st">"ERC"</span>,</span>
<span id="cb9-21"><a href="#cb9-21"></a>                          <span class="co"># FRONT PEL PAIS VALENCIA-ERC --&gt; ERC</span></span>
<span id="cb9-22"><a href="#cb9-22"></a>                          <span class="co"># https://www.vilaweb.cat/noticia/1142933/20000710/front-pais-valencia-fusionara-erc.pdf</span></span>
<span id="cb9-23"><a href="#cb9-23"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(partido_politico), <span class="st">"EH|EUSKO|ARALAR"</span>) <span class="sc">|</span> </span>
<span id="cb9-24"><a href="#cb9-24"></a>                            <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(partido_politico), <span class="st">"EH|EUSKO|ARALAR"</span>)<span class="sc">~</span> <span class="st">"EH - BILDU"</span>,</span>
<span id="cb9-25"><a href="#cb9-25"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(partido_politico, <span class="at">id =</span> <span class="st">"Latin-ASCII"</span>)), <span class="st">"MAS PAIS"</span>) <span class="sc">~</span> <span class="st">"MÁS PAÍS"</span>,</span>
<span id="cb9-26"><a href="#cb9-26"></a>                          <span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(partido_politico), <span class="st">"VOX"</span>) <span class="sc">~</span> <span class="st">"VOX"</span>,</span>
<span id="cb9-27"><a href="#cb9-27"></a>                          <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Otros"</span>)) <span class="co">#</span></span>
<span id="cb9-28"><a href="#cb9-28"></a><span class="co">#|&gt;   select(partido_politico)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="siglas-2" class="slide level2">
<h2>Siglas</h2>
<p>Con los nombre de los partidos políticos estandarizados a una lista de trece siglas (facor siglas), agrupamos la información que antes estaba a nivel de partido político a nivel de siglas.</p>
<p>El dataset datos_elecciones no es excesivamente grande, pero intentamos hacer la agrupación de la información lo más eficiente posible.</p>
<p>Para ello, cogemos una muestra aleatoria del dataset y vemos de qué forma es más rápida la agrupación de la información:</p>
<ul>
<li>summarise con todas las columnas en el by (se agrega directamente la información).</li>
<li>mutate con las columnas que sirven de identificador del dato y posterior distinct (se calcula la información agrupada y luego se quitan datos duplicados).</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  fecha   codigo_ccaa `Freq muestra(n)` `Freq muestra(%)`
  &lt;glue&gt;  &lt;chr&gt;                   &lt;int&gt;             &lt;dbl&gt;
1 2019-11 01                       7752              11.6
2 2019-11 02                       5087               7.6
3 2019-11 03                        827               1.2
4 2019-11 04                        716               1.1
5 2019-11 05                       1251               1.9</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  fecha   codigo_ccaa `Freq muestra(n)` `Freq muestra(%)`
  &lt;glue&gt;  &lt;chr&gt;                   &lt;int&gt;             &lt;dbl&gt;
1 2019-11 01                        387              11.6
2 2019-11 02                        254               7.6
3 2019-11 03                         41               1.2
4 2019-11 04                         35               1.1
5 2019-11 05                         62               1.9</code></pre>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">microbenchmark</span>(sample_1 <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">votos =</span> <span class="fu">sum</span>(votos), <span class="at">.by=</span><span class="fu">everything</span>()[<span class="sc">!</span> <span class="fu">everything</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'votos'</span>)]) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>(),</span>
<span id="cb12-2"><a href="#cb12-2"></a>               sample_1 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">votos =</span> <span class="fu">sum</span>(votos), <span class="at">.by=</span><span class="fu">c</span>(fecha, cod_mun, siglas)) <span class="sc">|&gt;</span> <span class="fu">distinct</span>() <span class="sc">|&gt;</span><span class="fu">ungroup</span>(),</span>
<span id="cb12-3"><a href="#cb12-3"></a>               <span class="at">times=</span><span class="dv">1</span>) <span class="co"># AUMENTAR A 100 EN LA EJECUCCIÓN FINAL DE LAS DIAPOS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unit: milliseconds
                                                                                                     expr
 ungroup(summarise(sample_1, votos = sum(votos), .by = everything()[!everything() %in%      c("votos")]))
            ungroup(distinct(mutate(sample_1, votos = sum(votos), .by = c(fecha,      cod_mun, siglas))))
     min      lq    mean  median      uq     max neval
 27.1409 27.1409 27.1409 27.1409 27.1409 27.1409     1
 27.7172 27.7172 27.7172 27.7172 27.7172 27.7172     1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>datos_elecciones <span class="ot">&lt;-</span> datos_elecciones <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">summarise</span>(<span class="at">votos =</span> <span class="fu">sum</span>(votos), <span class="at">.by=</span><span class="fu">everything</span>()[<span class="sc">!</span> <span class="fu">everything</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'votos'</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="siglas-3" class="slide level2">
<h2>Siglas</h2>
<p>PARA DIANA: este título lo dejamos como siglas?? A lo mejor incluso cabe en la diapo anterior. Con la estructura final de la tabla datos_elecciones cambiamos el formato de algunas columnas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>datos_elecciones <span class="ot">&lt;-</span> datos_elecciones <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">mutate</span>(<span class="at">siglas =</span> <span class="fu">fct_reorder</span>(siglas, votos, <span class="at">.fun =</span> sum),</span>
<span id="cb15-3"><a href="#cb15-3"></a>         <span class="at">fecha =</span> <span class="fu">factor</span>(fecha, <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="fu">str</span>(datos_elecciones, <span class="at">give.attr=</span><span class="dv">0</span>, <span class="at">max.level=</span><span class="dv">3</span>, <span class="at">vec.len=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [396,735 × 15] (S3: tbl_df/tbl/data.frame)
 $ fecha             : Ord.factor w/ 6 levels "2008-03"&lt;"2011-11"&lt;..: 1 1 1 1 1 1 1 1 ...
 $ cod_mun           : 'glue' chr [1:396735] "14-01-001" "14-01-001" "14-01-001" ...
 $ municipio         : chr [1:396735] "Alegría-Dulantzi" "Alegría-Dulantzi" "Alegría-Dulantzi" ...
 $ codigo_ccaa       : chr [1:396735] "14" "14" "14" ...
 $ codigo_provincia  : chr [1:396735] "01" "01" "01" ...
 $ numero_mesas      : num [1:396735] 2 2 2 2 2 2 2 2 ...
 $ censo             : num [1:396735] 1838 1838 1838 1838 ...
 $ participacion_1   : num [1:396735] 677 677 677 677 677 677 677 677 ...
 $ participacion_2   : num [1:396735] 1008 1008 1008 1008 ...
 $ votos_blancos     : num [1:396735] 23 23 23 23 23 23 23 23 ...
 $ votos_nulos       : num [1:396735] 13 13 13 13 13 13 13 13 ...
 $ votos_candidaturas: num [1:396735] 1269 1269 1269 1269 ...
 $ partido_politico  : chr [1:396735] "BERDEAK-LOS VERDES" "ARALAR" "PARTIDO OBRERO SOCIALISTA INTERNACIONALISTA" ...
 $ votos             : num [1:396735] 9 27 1 1 2 238 61 85 ...
 $ siglas            : Factor w/ 13 levels "EH - BILDU","MÁS PAÍS",..: 11 1 12 9 9 13 11 1 ...</code></pre>
</div>
</div>
</section>
<section id="limpieza-de-datos" class="slide level2">
<h2>LIMPIEZA DE DATOS</h2>
<p>Se crea un dataset con información a nivel municipio con el identificador de este y datos de censo electoral, número de mesas electorales y participación para cada fecha.</p>
<p>Para evitar trabajar con datos erróneos se realizan algunas revisiones lógicas de los datos, en busca de detectar errores de ingreso.</p>
<p>Para algunas variables numéricas se hace una trasformación logarítma debido a su gran dispersión. Las variables calculadas en porcentajes tiene valores extremos que en realidad son datos incoherentes (mayor número de votos que censados).</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section id="limpieza-de-datos-1" class="slide level2">
<h2>Limpieza de datos</h2>
<p>También se encuentran datos de participación erróneos como:</p>
<ul>
<li>Datos de participación mayores a 1.<br>
</li>
<li>Datos del primer avance superiores al segundo avances / datos del primer avance superior a 1.<br>
</li>
<li>Datos del segundo avance a cero.</li>
</ul>
<p>En la primera casuística, eliminamos los registros donde el número de votos es superior al número de censados. (solo dos registros)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 48735    16</code></pre>
</div>
</div>
<p>Para la tercera casuística, los registros donde el dato del segundo avance es cero pero el dato del primer avance ha sido mayor a cero no vamos a imputarlos directamenta ya que se corrigen con la casuística dos. PARA DIANA: tal vez incluso quitar esta frase</p>
<p>Los casos donde tanto el primer como el segundo avance es cero, se dan por válidos ya que el censo electoral de esos municipios es muy pequeño (vamos a suponer que todos los censados del pueblo fueron a votar a última hora).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>datos_elecciones_maestra <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">filter</span>(p_participacion_1 <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> p_participacion_2 <span class="sc">==</span> <span class="dv">0</span> ) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">select</span>(fecha, cod_mun, censo, p_participacion_1, p_participacion_2, p_votos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  fecha   cod_mun   censo p_participacion_1 p_participacion_2 p_votos
  &lt;ord&gt;   &lt;glue&gt;    &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;   &lt;dbl&gt;
1 2011-11 07-45-080     3                 0                 0   1    
2 2019-04 08-42-011    17                 0                 0   0.647
3 2019-11 07-45-080     3                 0                 0   1    </code></pre>
</div>
</div>
</section>
<section id="limpieza-de-datos-2" class="slide level2">
<h2>Limpieza de datos</h2>
<p>En los casos donde el dato del primer avance es superior al segundo se buscan municipios similares a él (aquellos que para esa fecha tuvieron un censo electoral de más/menos diez por ciento y que el dato del segundo avance no es superior al suyo) y se sustituye su dato de participación por la media de estos municipios similares. Hacemos el mismo trabajo para casos donde el dato del primer avance es superior a uno. En caso de no poder ser posible (pocos municipios similares, el dato imputado sigue siendo superior, etc.) imputamos el valor de la participación en el segundo avance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>datos_elecciones_maestra <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">filter</span>(p_participacion_1 <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">|</span> p_participacion_1 <span class="sc">&gt;</span> p_participacion_2) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">select</span>(fecha, cod_mun, censo, p_participacion_1, p_participacion_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   fecha   cod_mun   censo p_participacion_1 p_participacion_2
   &lt;ord&gt;   &lt;glue&gt;    &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
 1 2008-03 08-09-384   310            0.890             0.806 
 2 2008-03 07-16-276    27           10.2               0.741 
 3 2008-03 07-19-104    19            0.316             0.263 
 4 2008-03 16-26-086    22            1.05              1.05  
 5 2008-03 16-26-115    19            1.11              1.11  
 6 2008-03 02-44-009   804            0.419             0.0995
 7 2008-03 02-44-112   510            0.694             0.653 
 8 2011-11 07-19-048    18            0.333             0.167 
 9 2011-11 07-19-322    35            1                 0.6   
10 2016-06 07-19-321    39            1                 0     
11 2016-06 11-32-004  1798            0.387             0.239 
12 2019-04 02-22-044   234            0.880             0     
13 2019-04 02-22-151    88            1                 0     
14 2019-04 13-31-093   275            1                 0     
15 2019-04 08-40-161    35            0.0571            0     
16 2019-04 08-49-201   285            0.835             0     
17 2019-11 01-29-063   305            0.764             0     </code></pre>
</div>
</div>
<p></p>
</section>
<section id="limpieza-de-datos-3" class="slide level2">
<h2>Limpieza de datos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>correcion_df <span class="ot">&lt;-</span> <span class="cf">function</span>(data, cond_errata){</span>
<span id="cb22-2"><a href="#cb22-2"></a>  a <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">filter</span>( <span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text=</span>cond_errata)) )</span>
<span id="cb22-3"><a href="#cb22-3"></a>  </span>
<span id="cb22-4"><a href="#cb22-4"></a>  <span class="fu">return</span>(<span class="fu">as_tibble</span>(a))</span>
<span id="cb22-5"><a href="#cb22-5"></a>}</span>
<span id="cb22-6"><a href="#cb22-6"></a></span>
<span id="cb22-7"><a href="#cb22-7"></a>correcion_dato_censal <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_errata, fecha_errata, mun_errata){</span>
<span id="cb22-8"><a href="#cb22-8"></a>  </span>
<span id="cb22-9"><a href="#cb22-9"></a>  censo_errata <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb22-10"><a href="#cb22-10"></a>    <span class="fu">filter</span>(fecha<span class="sc">==</span>fecha_errata <span class="sc">&amp;</span> cod_mun <span class="sc">==</span> mun_errata) <span class="sc">|&gt;</span> </span>
<span id="cb22-11"><a href="#cb22-11"></a>    <span class="fu">select</span>(censo) <span class="sc">|&gt;</span> </span>
<span id="cb22-12"><a href="#cb22-12"></a>    <span class="fu">pull</span>()</span>
<span id="cb22-13"><a href="#cb22-13"></a>  </span>
<span id="cb22-14"><a href="#cb22-14"></a>  part_2_tope <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb22-15"><a href="#cb22-15"></a>    <span class="fu">filter</span>(fecha<span class="sc">==</span>fecha_errata <span class="sc">&amp;</span> cod_mun <span class="sc">==</span> mun_errata) <span class="sc">|&gt;</span> </span>
<span id="cb22-16"><a href="#cb22-16"></a>    <span class="fu">select</span>(p_participacion_2) <span class="sc">|&gt;</span> </span>
<span id="cb22-17"><a href="#cb22-17"></a>    <span class="fu">pull</span>()</span>
<span id="cb22-18"><a href="#cb22-18"></a>  </span>
<span id="cb22-19"><a href="#cb22-19"></a>  varlor_new <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb22-20"><a href="#cb22-20"></a>    <span class="fu">filter</span>(fecha <span class="sc">==</span> fecha_errata <span class="sc">&amp;</span> cod_mun <span class="sc">!=</span> mun_errata <span class="sc">&amp;</span> <span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text=</span>var_errata)) <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> p_participacion_2 <span class="sc">&lt;=</span> part_2_tope) <span class="sc">|&gt;</span></span>
<span id="cb22-21"><a href="#cb22-21"></a>    <span class="fu">filter</span>(<span class="fu">between</span>(censo,</span>
<span id="cb22-22"><a href="#cb22-22"></a>                   censo_errata <span class="sc">-</span> censo_errata <span class="sc">*</span> <span class="fl">0.1</span>,</span>
<span id="cb22-23"><a href="#cb22-23"></a>                   censo_errata <span class="sc">+</span> censo_errata <span class="sc">*</span> <span class="fl">0.1</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb22-24"><a href="#cb22-24"></a>    <span class="fu">select</span>(<span class="fu">all_of</span>(var_errata)) <span class="sc">|&gt;</span> </span>
<span id="cb22-25"><a href="#cb22-25"></a>    <span class="fu">sapply</span>(, <span class="at">FUN =</span> <span class="st">"mean"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-26"><a href="#cb22-26"></a>  </span>
<span id="cb22-27"><a href="#cb22-27"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(varlor_new)) { varlor_new <span class="ot">=</span> part_2_tope}</span>
<span id="cb22-28"><a href="#cb22-28"></a>  <span class="cf">if</span> (varlor_new <span class="sc">&gt;</span> part_2_tope) { varlor_new <span class="ot">=</span> part_2_tope}</span>
<span id="cb22-29"><a href="#cb22-29"></a>  <span class="co"># print de validación</span></span>
<span id="cb22-30"><a href="#cb22-30"></a>  <span class="co"># print(data |&gt; filter(fecha==fecha_errata &amp; cod_mun!=mun_errata &amp; eval(parse(text=var_errata))&lt;=1) |&gt;</span></span>
<span id="cb22-31"><a href="#cb22-31"></a>  <span class="co">#         filter(between(censo,</span></span>
<span id="cb22-32"><a href="#cb22-32"></a>  <span class="co">#                        censo_errata-censo_errata*0.10,</span></span>
<span id="cb22-33"><a href="#cb22-33"></a>  <span class="co">#                        censo_errata+censo_errata*0.10)) |&gt; select(fecha,cod_mun,censo,var_errata) |&gt; </span></span>
<span id="cb22-34"><a href="#cb22-34"></a>  <span class="co">#         mutate(val1=censo_errata-censo_errata*0.10,val2=censo_errata+censo_errata*0.10))</span></span>
<span id="cb22-35"><a href="#cb22-35"></a>  </span>
<span id="cb22-36"><a href="#cb22-36"></a>  <span class="fu">return</span>(varlor_new)</span>
<span id="cb22-37"><a href="#cb22-37"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>cond_errata_1 <span class="ot">=</span> <span class="st">"(p_participacion_1&gt;1 | p_participacion_1&gt;p_participacion_2)"</span></span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a>new_data <span class="ot">&lt;-</span> </span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="fu">correcion_df</span>(datos_elecciones_maestra,cond_errata_1) <span class="sc">|&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="fu">mutate</span>(<span class="at">p_participacion_1 =</span> <span class="fu">correcion_dato_censal</span>(<span class="at">data =</span> datos_elecciones_maestra, <span class="co"># corrijo con la base de datos original</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>                                                   <span class="at">var_errata =</span> <span class="st">"p_participacion_1"</span>,</span>
<span id="cb23-7"><a href="#cb23-7"></a>                                                   <span class="at">fecha_errata =</span> fecha,</span>
<span id="cb23-8"><a href="#cb23-8"></a>                                                   <span class="at">mun_errata =</span> cod_mun),</span>
<span id="cb23-9"><a href="#cb23-9"></a>         <span class="at">.by =</span> <span class="fu">c</span>(fecha, cod_mun))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="limpieza-de-datos-4" class="slide level2">
<h2>Limpieza de datos</h2>
<p>Comprobamos que ya no quedan registros con ningún tipo de error.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>datos_elecciones_maestra <span class="ot">&lt;-</span> datos_elecciones_maestra <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">anti_join</span>(new_data, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"fecha"</span>, <span class="st">"cod_mun"</span>))</span>
<span id="cb24-3"><a href="#cb24-3"></a></span>
<span id="cb24-4"><a href="#cb24-4"></a>datos_elecciones_maestra <span class="ot">&lt;-</span> <span class="fu">rbind</span>(datos_elecciones_maestra,new_data)</span>
<span id="cb24-5"><a href="#cb24-5"></a></span>
<span id="cb24-6"><a href="#cb24-6"></a>datos_elecciones_maestra <span class="sc">|&gt;</span> </span>
<span id="cb24-7"><a href="#cb24-7"></a>  <span class="fu">filter</span>(p_participacion_1<span class="sc">&gt;</span><span class="dv">1</span> <span class="sc">|</span> p_participacion_1 <span class="sc">&gt;</span> p_participacion_2) <span class="sc">|&gt;</span> </span>
<span id="cb24-8"><a href="#cb24-8"></a>  <span class="fu">select</span>(fecha, cod_mun, censo, p_participacion_1, p_participacion_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 5
# ℹ 5 variables: fecha &lt;ord&gt;, cod_mun &lt;glue&gt;, censo &lt;dbl&gt;,
#   p_participacion_1 &lt;dbl&gt;, p_participacion_2 &lt;dbl&gt;</code></pre>
</div>
</div>
<p></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 6
# ℹ 6 variables: fecha &lt;ord&gt;, cod_mun &lt;glue&gt;, censo &lt;dbl&gt;,
#   p_participacion_1 &lt;dbl&gt;, p_participacion_2 &lt;dbl&gt;, p_votos &lt;dbl&gt;</code></pre>
</div>
</div>
<p>En cambio</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 6
   fecha   cod_mun   censo p_participacion_1 p_participacion_2 p_votos
   &lt;ord&gt;   &lt;glue&gt;    &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;   &lt;dbl&gt;
 1 2011-11 07-45-080     3                 0                 0   1    
 2 2019-04 08-42-011    17                 0                 0   0.647
 3 2019-11 07-45-080     3                 0                 0   1    
 4 2016-06 07-19-321    39                 0                 0   0.769
 5 2019-04 02-22-044   234                 0                 0   0.786
 6 2019-04 02-22-151    88                 0                 0   0.75 
 7 2019-04 13-31-093   275                 0                 0   0.771
 8 2019-04 08-40-161    35                 0                 0   0.8  
 9 2019-04 08-49-201   285                 0                 0   0.853
10 2019-11 01-29-063   305                 0                 0   0.8  </code></pre>
</div>
</div>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-32-1.png" width="960" class="r-stretch"><p></p>
</section>
<section id="encuestas" class="slide level2">
<h2>ENCUESTAS</h2>
<p>Por otro lado, de la base de encuestas, descartamos aquellas encuestas en las que:</p>
<ul>
<li><p>hagan referencia a elecciones anteriores a 2.008.</p></li>
<li><p>Sean a pie de urna.</p></li>
<li><p>Tengan un tamaño muestral inferior a 750 o que sea desconocido.</p></li>
<li><p>Tengan menos de 1 o menos días de trabajo de campo.</p></li>
</ul>
</section>
<section id="encuestas-1" class="slide level2">
<h2>Encuestas</h2>
<p>Se eliminan aquellas columnas que no aporten información (aquellas que tengan un único valor) y también aquellas sin valores informados.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> type_survey        exit_poll            UCD            PCE      
 Length:1493        Mode :logical   Min.   : NA    Min.   : NA   
 Class :character   FALSE:1493      1st Qu.: NA    1st Qu.: NA   
 Mode  :character                   Median : NA    Median : NA   
                                    Mean   :NaN    Mean   :NaN   
                                    3rd Qu.: NA    3rd Qu.: NA   
                                    Max.   : NA    Max.   : NA   
                                    NA's   :1493   NA's   :1493  
       AP      
 Min.   : NA   
 1st Qu.: NA   
 Median : NA   
 Mean   :NaN   
 3rd Qu.: NA   
 Max.   : NA   
 NA's   :1493  </code></pre>
</div>
</div>
<p></p>
</section>
<section id="encuestas-2" class="slide level2">
<h2>Encuestas</h2>
<p>Se eliminan las columnas: type_survey, exit_poll, UCD, PCE, AP, PA, HB, EE, CDS, FN, PAD, PRD, MUC, CG, PAR, AIC, UV, EA, LV, ARM, PDP, PAP, ICV, EH, TE, EV.</p>
<ul>
<li><p><em>type_survey</em>: valor constante national.</p></li>
<li><p><em>exit_poll</em>: valor constante TRUE.</p></li>
<li><p><em>UCD, PCE…</em>: partidos políticos con toda la información a NA.</p></li>
</ul>
<p>Se transforma la base de datos encuestas a formato tidy.</p>
<p>Normalizamos los nombre de los partidos de manera análoga a la base de datos de votaciones.</p>
</section></section>
<section>
<section id="análisis-de-votaciones---palabras-previas" class="title-slide slide level1 center">
<h1>Análisis de votaciones - palabras previas</h1>
<p>Los datasets finales con los que trabajaremos en el análisis son encuestas y datos_elecciones, que son dos tibbles y están en formato tidy, lo que nos ayudará a realizar los análisis correspondientes. Se eligió este formato por las siguientes razones:</p>
<ul>
<li><p>Los nombres de las columnas de un tibble hacen que los datos sean más fáciles de entender.</p></li>
<li><p>Los tipos de datos específicos de los valores de un tibble ayudan a prevenir errores, con los que se trabaja en el análisis son adecuados para el estudio propuesto.</p></li>
<li><p>Permiten el uso de pipes y tidyverse.</p></li>
</ul>
<p></p>
</section>
<section id="análisis-de-votaciones---palabras-previas-1" class="slide level2">
<h2>Análisis de votaciones - palabras previas</h2>
<p>Los datasets que contienen los datos necesarios para analizar la evolución de la opinión pública en España desde 2.008 son: <strong>encuestas</strong> tibble de dimensión <u>13379*10</u> y <strong>datos_elecciones</strong>, tibble de dimensión <u>367241*13</u>.</p>
<p>Además las siglas las hemos definido de acuerdo a las indicaciones señaladas, excluyendo la base de datos “siglas” debido a no tener datos completos para el presente estudio, considerando que no abarca todos los partidos politicos que sugiere el proyecto.</p>
<p>Tampoco necesitamos el dataset cod_mun ya que hemos añadido su información a datos_elecciones.</p>
<div class="cell">
<pre><code>## # A tibble: 6 × 11
##   date_elec  id_pollster pollster media      field_date_from field_date_to  size
##   &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;      &lt;date&gt;          &lt;date&gt;        &lt;dbl&gt;
## 1 2008-03-09 pollster-49 GESOP    EL PERIÓD… 2008-03-05      2008-03-07     1000
## 2 2008-03-09 pollster-49 GESOP    EL PERIÓD… 2008-03-05      2008-03-07     1000
## 3 2008-03-09 pollster-49 GESOP    EL PERIÓD… 2008-03-05      2008-03-07     1000
## 4 2008-03-09 pollster-49 GESOP    EL PERIÓD… 2008-03-05      2008-03-07     1000
## 5 2008-03-09 pollster-49 GESOP    EL PERIÓD… 2008-03-05      2008-03-07     1000
## 6 2008-03-09 pollster-49 GESOP    EL PERIÓD… 2008-03-05      2008-03-07     1000
## # ℹ 4 more variables: turnout &lt;dbl&gt;, partido_politico &lt;chr&gt;,
## #   estimacion_votos &lt;dbl&gt;, siglas &lt;fct&gt;</code></pre>
</div>
<div class="cell">
<pre><code>## # A tibble: 6 × 15
##   fecha   cod_mun   municipio    codigo_ccaa codigo_provincia numero_mesas censo
##   &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;                   &lt;dbl&gt; &lt;dbl&gt;
## 1 2008-03 14-01-001 Alegría-Dul… 14          01                          2  1838
## 2 2008-03 14-01-001 Alegría-Dul… 14          01                          2  1838
## 3 2008-03 14-01-001 Alegría-Dul… 14          01                          2  1838
## 4 2008-03 14-01-001 Alegría-Dul… 14          01                          2  1838
## 5 2008-03 14-01-001 Alegría-Dul… 14          01                          2  1838
## 6 2008-03 14-01-001 Alegría-Dul… 14          01                          2  1838
## # ℹ 8 more variables: participacion_1 &lt;dbl&gt;, participacion_2 &lt;dbl&gt;,
## #   votos_blancos &lt;dbl&gt;, votos_nulos &lt;dbl&gt;, votos_candidaturas &lt;dbl&gt;,
## #   partido_politico &lt;chr&gt;, votos &lt;dbl&gt;, siglas &lt;fct&gt;</code></pre>
</div>
</section>
<section id="análisis-de-votaciones---palabras-previas-2" class="slide level2">
<h2>Análisis de votaciones - palabras previas</h2>
<p>El análisis es principalmente a través de dataviz y con información de los partidos políticos. Definimos los colores con los que vamos a representar a cada uno de los partidos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co">#Colocación de colores para cada sigla según su color oficial</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>datos_elecciones <span class="ot">&lt;-</span> datos_elecciones <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">mutate</span>(<span class="at">color_politico =</span> <span class="fu">case_when</span>(siglas <span class="sc">==</span> <span class="st">"PP"</span> <span class="sc">~</span> <span class="st">"#3399FF"</span>,</span>
<span id="cb31-4"><a href="#cb31-4"></a>                         siglas <span class="sc">==</span> <span class="st">"PSOE"</span> <span class="sc">~</span> <span class="st">"#F6350B"</span>,</span>
<span id="cb31-5"><a href="#cb31-5"></a>                         siglas <span class="sc">==</span> <span class="st">"C's"</span> <span class="sc">~</span> <span class="st">"#FF5824"</span>,</span>
<span id="cb31-6"><a href="#cb31-6"></a>                         siglas <span class="sc">==</span> <span class="st">"PNV"</span> <span class="sc">~</span> <span class="st">"#008135"</span>,</span>
<span id="cb31-7"><a href="#cb31-7"></a>                         siglas <span class="sc">==</span> <span class="st">"BNG"</span> <span class="sc">~</span> <span class="st">"#76b3dd"</span>,</span>
<span id="cb31-8"><a href="#cb31-8"></a>                         siglas <span class="sc">==</span> <span class="st">"COMPROMÍS"</span> <span class="sc">~</span> <span class="st">"#de6c25"</span>,</span>
<span id="cb31-9"><a href="#cb31-9"></a>                         siglas <span class="sc">==</span> <span class="st">"CiU"</span> <span class="sc">~</span> <span class="st">"#FF0000"</span>,</span>
<span id="cb31-10"><a href="#cb31-10"></a>                         siglas <span class="sc">==</span> <span class="st">"UP"</span> <span class="sc">~</span> <span class="st">"#6D50B3"</span>,</span>
<span id="cb31-11"><a href="#cb31-11"></a>                         siglas <span class="sc">==</span> <span class="st">"ERC"</span> <span class="sc">~</span> <span class="st">"#ffbf41"</span>,</span>
<span id="cb31-12"><a href="#cb31-12"></a>                         siglas <span class="sc">==</span> <span class="st">"EH - BILDU"</span> <span class="sc">~</span> <span class="st">"#00bda1"</span>,</span>
<span id="cb31-13"><a href="#cb31-13"></a>                         siglas <span class="sc">==</span> <span class="st">"MÁS PAÍS"</span> <span class="sc">~</span> <span class="st">"#E61455"</span>,</span>
<span id="cb31-14"><a href="#cb31-14"></a>                         siglas <span class="sc">==</span> <span class="st">"VOX"</span> <span class="sc">~</span> <span class="st">"#73B446"</span>,</span>
<span id="cb31-15"><a href="#cb31-15"></a>                         <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"#462B25"</span>))</span>
<span id="cb31-16"><a href="#cb31-16"></a></span>
<span id="cb31-17"><a href="#cb31-17"></a><span class="co">#Generación de tibble con colores para cada sigla según su color oficial</span></span>
<span id="cb31-18"><a href="#cb31-18"></a>colores_politicos <span class="ot">&lt;-</span> datos_elecciones <span class="sc">|&gt;</span> </span>
<span id="cb31-19"><a href="#cb31-19"></a>  <span class="fu">distinct</span>(siglas) <span class="sc">|&gt;</span> </span>
<span id="cb31-20"><a href="#cb31-20"></a>  <span class="fu">mutate</span>(<span class="at">color_politico=</span><span class="fu">case_when</span>(siglas <span class="sc">==</span> <span class="st">"BNG"</span> <span class="sc">~</span> <span class="st">"#76b3dd"</span>,</span>
<span id="cb31-21"><a href="#cb31-21"></a>                                  siglas <span class="sc">==</span> <span class="st">"C's"</span> <span class="sc">~</span> <span class="st">"#FF5824"</span>,</span>
<span id="cb31-22"><a href="#cb31-22"></a>                                  siglas <span class="sc">==</span> <span class="st">"CiU"</span> <span class="sc">~</span> <span class="st">"#FF0000"</span>,</span>
<span id="cb31-23"><a href="#cb31-23"></a>                                  siglas <span class="sc">==</span> <span class="st">"COMPROMÍS"</span> <span class="sc">~</span> <span class="st">"#de6c25"</span>,</span>
<span id="cb31-24"><a href="#cb31-24"></a>                                  siglas <span class="sc">==</span> <span class="st">"EH - BILDU"</span> <span class="sc">~</span> <span class="st">"#00bda1"</span>,</span>
<span id="cb31-25"><a href="#cb31-25"></a>                                  siglas <span class="sc">==</span> <span class="st">"ERC"</span> <span class="sc">~</span> <span class="st">"#ffbf41"</span>,</span>
<span id="cb31-26"><a href="#cb31-26"></a>                                  siglas <span class="sc">==</span> <span class="st">"MÁS PAÍS"</span> <span class="sc">~</span> <span class="st">"#E61455"</span>,</span>
<span id="cb31-27"><a href="#cb31-27"></a>                                  siglas <span class="sc">==</span> <span class="st">"PNV"</span> <span class="sc">~</span> <span class="st">"#008135"</span>,</span>
<span id="cb31-28"><a href="#cb31-28"></a>                                  siglas <span class="sc">==</span> <span class="st">"PP"</span> <span class="sc">~</span> <span class="st">"#3399FF"</span>,</span>
<span id="cb31-29"><a href="#cb31-29"></a>                                  siglas <span class="sc">==</span> <span class="st">"PSOE"</span> <span class="sc">~</span> <span class="st">"#F6350B"</span>,</span>
<span id="cb31-30"><a href="#cb31-30"></a>                                  siglas <span class="sc">==</span> <span class="st">"UP"</span> <span class="sc">~</span> <span class="st">"#6D50B3"</span>,</span>
<span id="cb31-31"><a href="#cb31-31"></a>                                  siglas <span class="sc">==</span> <span class="st">"VOX"</span> <span class="sc">~</span> <span class="st">"#73B446"</span>,</span>
<span id="cb31-32"><a href="#cb31-32"></a>                                  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"#462B25"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="análisis-de-votaciones---palabras-previas-3" class="slide level2">
<h2>Análisis de votaciones - palabras previas</h2>
<p>PARA DIANA: mirar si esto cabe en la slide anterior</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co"># Censo total en cada elección</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>maestra_censo <span class="ot">&lt;-</span> datos_elecciones <span class="sc">|&gt;</span> <span class="fu">distinct</span>(fecha, cod_mun, censo) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">censo=</span><span class="fu">sum</span>(censo), <span class="at">.by =</span> fecha)</span>
<span id="cb32-3"><a href="#cb32-3"></a></span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="co"># Total de votos por sigla en cada uno de las fechas (agupamos todos los votos de todos los municipios)</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>data_1 <span class="ot">&lt;-</span> datos_elecciones <span class="sc">|&gt;</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>  <span class="fu">summarise</span>(<span class="at">votos=</span><span class="fu">sum</span>(votos), <span class="at">.by =</span> <span class="fu">c</span>(fecha, siglas, color_politico)) <span class="sc">|&gt;</span> </span>
<span id="cb32-7"><a href="#cb32-7"></a>  <span class="fu">left_join</span>(maestra_censo, <span class="at">by =</span> <span class="st">"fecha"</span>)</span>
<span id="cb32-8"><a href="#cb32-8"></a>  <span class="co"># left_join(datos_elecciones |&gt; distinct(fecha, cod_mun, censo) |&gt; summarise(censo=sum(censo), .by = fecha), by = "fecha")</span></span>
<span id="cb32-9"><a href="#cb32-9"></a></span>
<span id="cb32-10"><a href="#cb32-10"></a>min_votos <span class="ot">&lt;-</span> data_1 <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">votos=</span><span class="fu">sum</span>(votos), <span class="at">.by=</span>fecha) <span class="sc">|&gt;</span> </span>
<span id="cb32-11"><a href="#cb32-11"></a>  <span class="fu">summarise</span>(<span class="at">min_v=</span><span class="fu">min</span>(votos)) <span class="sc">|&gt;</span> <span class="fu">pull</span>()</span>
<span id="cb32-12"><a href="#cb32-12"></a></span>
<span id="cb32-13"><a href="#cb32-13"></a>participacion <span class="ot">&lt;-</span> data_1 <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">participacion=</span><span class="fu">sum</span>(votos)<span class="sc">/</span><span class="fu">max</span>(censo), <span class="at">.by=</span>fecha)</span>
<span id="cb32-14"><a href="#cb32-14"></a></span>
<span id="cb32-15"><a href="#cb32-15"></a>p_votos <span class="ot">&lt;-</span> data_1 <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">votos =</span> <span class="fu">sum</span>(votos), <span class="at">.by=</span>fecha) <span class="sc">|&gt;</span> <span class="fu">left_join</span>(maestra_censo, <span class="at">by =</span> <span class="st">"fecha"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb32-16"><a href="#cb32-16"></a>  <span class="fu">mutate</span>(<span class="at">p_votos =</span> votos<span class="sc">/</span>censo) <span class="sc">|&gt;</span> <span class="fu">select</span>(p_votos) <span class="sc">|&gt;</span> <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="análisis-de-votaciones-en-españa-en-el-rango-2.008---2.019" class="title-slide slide level1 center">
<h1>Análisis de votaciones en España en el rango 2.008 - 2.019</h1>
<p>En España se han realizado 6 votaciones en el rango de años de 2.008 a 2.019. Para analizar estas votaciones, se utilizaron <strong>datos electorales</strong> y de participación y número de votos. Se utilizaron las <strong>encuestas electorales</strong> desde 2.008 incluyendo sus casas encuestadoras, la fecha de las futuras elecciones y el tipo de encuesta.</p>
</section>
<section id="distribución-de-votos" class="slide level2">
<h2>Distribución de votos</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>España cuenta en la actualidad con 6 partidos políticos de corte nacional, y 6 partidos políticos de estatus autonómico o nacionalista. Su concentración de voto en cada una de las elecciones se pueden apreciar en el siguiente gráfico.</p>
</div><div class="column" style="width:50%;">
<p>Hasta el 2.011 la dominancia de los partidos de corte nacional fue superior al 80 %, disminuyó entre las votaciones del 2.015 a abril del 2.019 a valores del 71 % - 75 %, y en la siguiente votación volvió a aumentar al 78 %.</p>
</div>
</div>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-42-1.png" width="960" class="r-stretch"></section>
<section id="bipartidismo" class="slide level2">
<h2>Bipartidismo</h2>
<p>PARA DIANA: intentar meter los dos gráficos en la diapo, si no uno en cada slide. VER CÓMO QUEDA MEJOR LA LEYENDA, si como está o quitando la línea de legend.position = “bottom”</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-43-1.png" width="960"></p>
</div>
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-43-2.png" width="960"></p>
</div>
</div>
</section>
<section id="votaciones-en-municipios-con-mayor-censo" class="slide level2">
<h2>Votaciones en municipios con mayor censo</h2>
<p>Se trata de 48 municipios con más de 100.000 censados.</p>
<p>Vemos la distribucion del total de votos en estos municipios en cada una de las elecciones.</p>
<p>El peso de los partidos de ámbito nacional se mantiene.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-45-1.png" width="960" class="r-stretch"></section>
<section id="votaciones-en-municipios-con-mayor-censo-1" class="slide level2">
<h2>Votaciones en municipios con mayor censo</h2>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-46-1.png" width="960" class="r-stretch"></section>
<section id="partido-ganador-por-elección" class="slide level2">
<h2>Partido ganador por elección</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Bajamos ahora a nivel municipio para ver el primer y segundo partido más votado y no excluímos a ningún municipio en función del censo.</p>
<p>Visualmente se aprecia que cuando el PP queda en primer lugar el partido que más veces está en segundo puesto es el PSOE. Y viceversa. Cuando el PSOE ocupa la primera posición en votos el partido que más veces está tras él es el PP. PARA DIANA: si ponemos viceversa la última frase se puede quitar.</p>
<div class="cell">
<pre><code>## # A tibble: 98,595 × 4
##    fecha   cod_mun   siglas votos
##    &lt;ord&gt;   &lt;glue&gt;    &lt;fct&gt;  &lt;dbl&gt;
##  1 2008-03 01-04-001 PSOE     512
##  2 2008-03 01-04-001 PP       382
##  3 2008-03 01-04-002 PSOE     532
##  4 2008-03 01-04-002 PP       340
##  5 2008-03 01-04-003 PP      7632
##  6 2008-03 01-04-003 PSOE    4261
##  7 2008-03 01-04-004 PSOE     269
##  8 2008-03 01-04-004 PP       106
##  9 2008-03 01-04-005 PSOE     236
## 10 2008-03 01-04-005 PP       191
## # ℹ 98,585 more rows</code></pre>
</div>
</div><div class="column" style="width:50%;">
<p>Como no tenemos manera de deshacer un empate de votos, permitimos tener más de un partido en primera posición. En estos casos, todos los partidos que estén en primera posición ocuparán tanto el primer como el segundo puesto.</p>
<p>Así:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion  
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 2019-11 01-04-021 01          PP        49 Más votado
2 2019-11 01-04-021 01          PSOE      49 Más votado</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion          
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;             
1 2019-11 01-04-021 01          PP        49 Segundo más votado
2 2019-11 01-04-021 01          PSOE      49 Segundo más votado</code></pre>
</div>
</div>
<p>O así:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion  
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 2015-12 07-19-010 07          PP         2 Más votado
2 2015-12 07-19-010 07          PSOE       2 Más votado
3 2015-12 07-19-010 07          VOX        2 Más votado
4 2015-12 07-19-010 07          C's        2 Más votado</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion          
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;             
1 2015-12 07-19-010 07          PP         2 Segundo más votado
2 2015-12 07-19-010 07          PSOE       2 Segundo más votado
3 2015-12 07-19-010 07          VOX        2 Segundo más votado
4 2015-12 07-19-010 07          C's        2 Segundo más votado</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="partido-ganador-por-elección-1" class="slide level2">
<h2>Partido ganador por elección</h2>
<p>Vemos la relación entre el partido más votado y el segundo, teniendo en cuenta todos los municipios para todas las elecciones. Visualmente se aprecia que cuando el PP queda en primer lugar el partido que más veces está en segundo puesto es el PSOE. Y viceversa. Cuando el PSOE ocupa la primera posición en votos el partido que más veces está tras él es el PP.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-52-1.png" width="960" class="r-stretch"></section>
<section id="partido-ganador-por-elección-2" class="slide level2">
<h2>Partido ganador por elección</h2>
<p>Vemos un pequeño flujo residual que va de PSOE en primera posición a PSOE en segunda posición. Esto se debe a los casos de empate en el partido más votado donde decidíamos poner a ambos partidos como primer y segundo partido más votado.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-53-1.png" width="960" class="r-stretch"></section>
<section id="partido-ganador-por-elección-3" class="slide level2">
<h2>Partido ganador por elección</h2>
<p>PARA DIANA: este texto meterlo todo en una diapo, se muestra pero no hace falta leerlo, se explica por encima. (hasta la X incluída)</p>
<p>Igual que hemos visto casos donde primer y segundo puesto estaban empatados, merece la pena mirar dónde esa diferencia es máxima. Solo interesa municipios donde el censo sea alto, pongamos un marco de 2.000 censados en adelante, ya que en municipios con pocos censados electorales la diferencia entre primer y segundo partido serán muy pequeñas y esto nos puede dar una distribución de la variable “difenrecia entre primer y segundo partido más votado” con una cola izquierda muy pesada.</p>
<p>Con esta restricción de municipios con mayor censo sabemos que si vemos una diferencia de pocos votos es realmente un resultado ajustado, ya que una diferencia en cinco o diez votos en zonas con pocos censados electorales no tiene tanto impacto.</p>
<p>Somos conscientemente de que trabajamos con medidas repetidas para un mismo municipio (un dato para cada una de las elecciones).</p>
<p>Para este punto se plantea agrupar los datos de los municipios ya que hasta ahora hemos estado trabajando con medidas repetidas para un mismo municipio (un dato para cada una de las elecciones).</p>
<p>Esto presenta un punto interesante en el nivel de agregación de la información, ya que el hecho de agrupar la información del censo a nivel municipio es para evitar duplicados en un análisis a nivel municipio (en puntos anteriores no era necesaria esta agrupación ya que se estaban analizado resultados electorales independientes). Pero ahora queremos identificar municipios donde la diferencia en votos entre primer y segundo partido fue mayor a lo esperado. Observaciones:</p>
<ul>
<li>Sería de esperar que el censo tuviera poca variabilidad y el hecho de agrupar el número de censados por municipio en cada una de las elecciones no afectase mucho al filtro de municipios con más de 2.000 censados. Pero en los últimos años el tráfico de población de zonas rurales a grandes ciudades junto con el fallecimiento de personas de mayor edad y poca natalidad en estos municpios (debido al tráfico de la población) ha hecho que los municipios más pequeños tengan cada año menos censados electorales (poca “renovación” en el censo electoral al no tener jóvenes que sustituyan a los censados electorales más seniors que van saliendo del censo electoral).<br>
</li>
<li>Como queremos ver qué municipios han tenido mayor diferencia de votos, no podemos agrupar en bruto los votos de cada partido en cada una de las elecciones a un único registro, aunque podemos usar alternativas como “diferencia media entre primer y segundo partido en la elección <em>x</em>”.</li>
</ul>
</section>
<section id="diferencias-entre-primer-y-segundo-partido" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>Para cada fecha se marca si el municipio tenía menos de 2.000 censados electorales o no. La evolución de esta variable en el tiempo es la siguiente:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  fecha   media
  &lt;ord&gt;   &lt;dbl&gt;
1 2008-03 0.761
2 2011-11 0.760
3 2015-12 0.762
4 2016-06 0.762
5 2019-04 0.762
6 2019-11 0.762
# A tibble: 28 × 7
# Groups:   2008-03, 2011-11, 2015-12, 2016-06, 2019-04 [25]
   `2008-03` `2011-11` `2015-12` `2016-06` `2019-04` `2019-11`     n
       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;
 1         0         0         0         0         0         0  1867
 2         0         0         0         0         0         1     5
 3         0         0         0         0         1         0     2
 4         0         0         0         0         1         1    11
 5         0         0         0         0        NA        NA     1
 6         0         0         0         1         0         0     1
 7         0         0         0         1         1         1     2
 8         0         0         1         1         1         1    22
 9         0         0        NA        NA        NA        NA     2
10         0         1         0         1         1         1     1
11         0         1         1         1         1         1    23
12         0         1         1         1        NA        NA     1
13         1         0         0         0         0         0    29
14         1         0         1         1         0         0     1
15         1         1         0         0         0         0    12
16         1         1         0         1         0         0     1
17         1         1         1         0         0         0     3
18         1         1         1         1         0         0    10
19         1         1         1         1         1         0     3
20         1         1         1         1         1         1  6114
21         1         1         1         1        NA         1     1
22        NA         0         0         0         0         0     2
23        NA         1         1         1         1         1     2
24        NA        NA         0         0         0         0     2
25        NA        NA         1         1         1         1     7
26        NA        NA        NA         1         1         1     2
27        NA        NA        NA        NA         0         0     1
28        NA        NA        NA        NA         1         1     7</code></pre>
</div>
</div>
</section>
<section id="diferencias-entre-primer-y-segundo-partido-1" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p><strong>HIGHLIGHT</strong></p>
<p>El municipio de Cesuras (La Coruña) tiene datos solo para 2008-03 y 2011-11 a pesar de tener un censo y censo electoral superior a 2.000.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  fecha   cod_mun   municipio censo votos_candidaturas
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;     &lt;dbl&gt;              &lt;dbl&gt;
1 2008-03 11-15-026 Cesuras    2089               1435
2 2011-11 11-15-026 Cesuras    2025               1396</code></pre>
</div>
</div>
<p>Esto es debido a que en 2.013 se crea el municipio Oza-Cesuras como fusión de los municipios de Oza de los Ríos y Cesuras.</p>
<p>[<img data-src="https://raw.githubusercontent.com/MarioC0093/Software_GRUPAL_7/main/Versiones%20finales/imagenes/censo_Cesuras.JPG" alt="Cesuras">]{width=“30%”}</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>datos_elecciones <span class="sc">|&gt;</span> <span class="fu">filter</span>(cod_mun<span class="sc">==</span><span class="st">"11-15-063"</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(fecha,cod_mun,municipio,censo,votos_candidaturas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  fecha   cod_mun   municipio    censo votos_candidaturas
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;        &lt;dbl&gt;              &lt;dbl&gt;
1 2008-03 11-15-063 Oza dos Ríos  2846               2018
2 2011-11 11-15-063 Oza dos Ríos  2849               1973</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>datos_elecciones <span class="sc">|&gt;</span> <span class="fu">filter</span>(cod_mun<span class="sc">==</span><span class="st">"11-15-902"</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(fecha,cod_mun,municipio,censo,votos_candidaturas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  fecha   cod_mun   municipio   censo votos_candidaturas
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;              &lt;dbl&gt;
1 2015-12 11-15-902 Oza-Cesuras  4660               3266
2 2016-06 11-15-902 Oza-Cesuras  4598               3098
3 2019-04 11-15-902 Oza-Cesuras  4522               3112
4 2019-11 11-15-902 Oza-Cesuras  4507               2803</code></pre>
</div>
</div>
</section>
<section id="diferencias-entre-primer-y-segundo-partido-2" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>Tenemos dos opciones:</p>
<ul>
<li>No hablar de qué municipio tuvo mayor diferencia en votos sino que hablamos de qué municipio-fecha tuvo la mayor diferencia.</li>
<li>Quedarnos con resultados de municipios que tuvieron más de 2.000 censados en el momento en que se convocan elecciones y luego agregar los datos a nivel municipio. Esto nos obliga igualmente a agrupar a nivel municipio el número de censados y la diferencia de votos (censo medio y diferencia de votos media) y hacer filtros y análisis sobre esto número medio.</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
# Groups:   fecha, cod_mun [3]
  fecha   cod_mun   codigo_ccaa siglas votos posicion           lag_votos
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;
1 2008-03 01-04-003 01          PP      7632 Más votado                NA
2 2008-03 01-04-003 01          PSOE    4261 Segundo más votado      3371
3 2008-03 01-04-006 01          PSOE    2802 Más votado                NA
4 2008-03 01-04-006 01          PP      2226 Segundo más votado       576
5 2008-03 01-04-011 01          PSOE    1360 Más votado                NA
6 2008-03 01-04-011 01          PP       730 Segundo más votado       630</code></pre>
</div>
</div>
<p>Se opta por la primera opción, por ser un análisis más rápido y alterar lo menos posible los datos reales. Vemos la distribución de votos para los registros con censo mayor a 2.000.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-58-1.png" width="960" class="r-stretch"></section>
<section id="diferencias-entre-primer-y-segundo-partido-3" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>La distribución de la diferencia de votos para estos mismos municipios.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-59-1.png" width="960" class="r-stretch"></section>
<section id="diferencias-entre-primer-y-segundo-partido-4" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>PARA DIANA: esto le he metido dos veces para intentar tener los gráficos en una única slide, pero por el tamaño no se ven los cuatros gráficos, podemos reducir el tamaño de los plots, ¿mediante el chunk? Tenemos dos opciones:</p>
<ul>
<li>No hablar de qué municipio tuvo mayor diferencia en votos sino que hablamos de qué municipio-fecha tuvo la mayor diferencia.</li>
<li>Quedarnos con resultados de municipios que tuvieron más de 2.000 censados en el momento en que se convocan elecciones y luego agregar los datos a nivel municipio. Esto nos obliga igualmente a agrupar a nivel municipio el número de censados y la diferencia de votos (censo medio y diferencia de votos media) y hacer filtros y análisis sobre esto número medio.</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
# Groups:   fecha, cod_mun [3]
  fecha   cod_mun   codigo_ccaa siglas votos posicion           lag_votos
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;
1 2008-03 01-04-003 01          PP      7632 Más votado                NA
2 2008-03 01-04-003 01          PSOE    4261 Segundo más votado      3371
3 2008-03 01-04-006 01          PSOE    2802 Más votado                NA
4 2008-03 01-04-006 01          PP      2226 Segundo más votado       576
5 2008-03 01-04-011 01          PSOE    1360 Más votado                NA
6 2008-03 01-04-011 01          PP       730 Segundo más votado       630</code></pre>
</div>
</div>
<p>Se opta por la primera opción, por ser un análisis más rápido y alterar lo menos posible los datos reales. Vemos la distribución de votos para los registros con censo mayor a 2.000 y la distribución de la diferencia de votos para estos mismos municipios.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-61-1.png" width="960"></p>
</div>
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-61-2.png" width="960"></p>
</div>
</div>
</section>
<section id="diferencias-entre-primer-y-segundo-partido-5" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>PARA DIANA: hacer escala de algún color para las CCAA? son 19 entonces posiblemente no haya paletas… o hacer más curiosos los boxblot con violines, jitter, etc. EN ESTE O EN ALGÚN OTRO</p>
<p>La distribución del logaritmo de la diferencia de votos sigue una distribución normal y mucho más visual que la distribucion original que nos permite la búsqueda de outliers.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-62-1.png" width="960" class="r-stretch"></section>
<section id="diferencias-entre-primer-y-segundo-partido-6" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>Para determinar los municipios-fecha con mayor diferencia de voto podemos medir esta diferencia de forma absoluta o de forma relativa.</p>
<ul>
<li>Absoluta: máximo número en bruto en diferencia de votos.<br>
</li>
<li>Relativa: máxima diferencia de votos medida sobre los censados electorales.</li>
</ul>
<p>Esta segunda forma relativiza la diferencia de votos en función del tamaño de la muestra. Ya que en municipios con mayor censo se espera mayor diferencia en votos.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-63-1.png" width="960" class="r-stretch"></section>
<section id="diferencias-entre-primer-y-segundo-partido-7" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>El top cuatro de mayor diferencia absoluta en votos pertenencen al municipio 12-28-079 (Madrid). Es decir, Madrid ha tenido la mayor diferencia absoluta de votos entre el primer y el segundo partido más votado en las cuatro elecciones más antiguas.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  fecha   cod_mun   municipio   censo dif_votos_absoluta
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;              &lt;dbl&gt;
1 2011-11 12-28-079 Madrid    2290453             442069
2 2016-06 12-28-079 Madrid    2363829             329278
3 2015-12 12-28-079 Madrid    2371327             270065
4 2008-03 12-28-079 Madrid    2262681             228121
5 2008-03 09-08-019 Barcelona 1157357             184449</code></pre>
</div>
</div>
<p>De los cinco casos con mayor diferencia absoluta de votos cuatro de ellos son del municipio 01-41-901 (Cañada Rosal).</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  fecha   cod_mun   municipio    censo dif_votos_relativa
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;        &lt;dbl&gt;              &lt;dbl&gt;
1 2008-03 01-41-901 Cañada Rosal  2516              0.675
2 2008-03 01-41-056 Luisiana, La  3605              0.544
3 2011-11 01-41-901 Cañada Rosal  2626              0.530
4 2019-11 01-41-901 Cañada Rosal  2692              0.491
5 2019-04 01-41-901 Cañada Rosal  2703              0.490</code></pre>
</div>
</div>
<p>Observando para cada municipio unicamente su registro con mayor diferencia de votos absoluta/relativa, el ranking queda de la siguiente manera.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  fecha   cod_mun   municipio   censo dif_votos_absoluta
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;              &lt;dbl&gt;
1 2011-11 12-28-079 Madrid    2290453             442069
2 2008-03 09-08-019 Barcelona 1157357             184449
3 2011-11 17-46-250 València   574269             123301
4 2011-11 15-30-030 Murcia     305668             111669
5 2019-04 01-41-091 Sevilla    539721              61413</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  fecha   cod_mun   municipio              censo dif_votos_relativa
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;                  &lt;dbl&gt;              &lt;dbl&gt;
1 2008-03 01-41-901 Cañada Rosal            2516              0.675
2 2008-03 01-41-056 Luisiana, La            3605              0.544
3 2011-11 07-45-098 Menasalbas              2273              0.478
4 2008-03 01-23-096 Villanueva de la Reina  2668              0.459
5 2011-11 17-03-058 Cox                     4798              0.452</code></pre>
</div>
</div>
<p>Observando en cada elección el municipio con máxima diferencia en votos absoluta/relativa el ranking es el siguiente.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  fecha   cod_mun   municipio   censo dif_votos_absoluta
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;              &lt;dbl&gt;
1 2008-03 12-28-079 Madrid    2262681             228121
2 2011-11 12-28-079 Madrid    2290453             442069
3 2015-12 12-28-079 Madrid    2371327             270065
4 2016-06 12-28-079 Madrid    2363829             329278
5 2019-04 12-28-079 Madrid    2374370             113158
6 2019-11 01-41-091 Sevilla    539592              38475</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  fecha   cod_mun   municipio                 censo dif_votos_relativa
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;                     &lt;dbl&gt;              &lt;dbl&gt;
1 2008-03 01-41-901 Cañada Rosal               2516              0.675
2 2011-11 01-41-901 Cañada Rosal               2626              0.530
3 2015-12 01-21-063 San Bartolomé de la Torre  2614              0.383
4 2016-06 01-41-061 Marinaleda                 2195              0.427
5 2019-04 01-41-901 Cañada Rosal               2703              0.490
6 2019-11 01-41-901 Cañada Rosal               2692              0.491</code></pre>
</div>
</div>
</section>
<section id="diferencias-entre-primer-y-segundo-partido-8" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>Como resumen de los rankings anteriores podemoss decir que las máximas diferencias absolutas en votos pertenecen a las grandes ciudades y suele ser Madrid el municpio que presenta la máxima diferencia, sobre todo en elecciones más antiguas (la diferencia relativa en votos ha ido reduciéndose en cada elección). La diferencia relativa en votos es mayor en municipios donde el censo es más bajo.</p>
<p>¿Tendrá algo que ver el porcentaje de voto con los resultados electorales? Miramos primero aquellos municipios y provincias con mayor porcentaje de voto.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-69-1.png" width="960"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>Aunque a mayor censo electoral el porcentaje de voto es menor, el porcentaje de votos nulos no parece seguir ninguna tendencia en función del censo. Al igual que con la diferencia de votos, podemos mirar obtener el ranking de votos nulos en frecuencia absoluta o relativa. E igual que antes, la mayor frecuencia absoluta la encontramos en Madrid y Barcelona (con un porcentaje de votos nulos casi inexistente) y la mayor frecuencia relativa la vemos en municipios con muy poco censo electoral.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>datos_porcentaje_voto <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="fu">select</span>(fecha, cod_mun, municipio, censo, votos_nulos, p_votos_nulos) <span class="sc">|&gt;</span> </span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">slice_max</span>(votos_nulos, <span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  fecha   cod_mun   municipio   censo votos_nulos p_votos_nulos
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;
1 2011-11 12-28-079 Madrid    2290453       16527          0.01
2 2019-04 12-28-079 Madrid    2374370       13585          0.01
3 2019-11 12-28-079 Madrid    2384269       11810          0   
4 2011-11 09-08-019 Barcelona 1143219       10716          0.01
5 2016-06 12-28-079 Madrid    2363829       10570          0   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>datos_porcentaje_voto <span class="sc">|&gt;</span> <span class="fu">select</span>(fecha, cod_mun, municipio, censo, votos_nulos, p_votos_nulos) <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(p_votos_nulos, <span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  fecha   cod_mun   municipio   censo votos_nulos p_votos_nulos
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;
1 2019-04 08-37-368 Villasdardo    17           4          0.24
2 2019-11 02-50-214 Pomer          18           4          0.22
3 2019-11 08-09-310 Reinoso        15           3          0.2 
4 2019-04 08-34-241 Villodre       18           3          0.17
5 2019-11 08-40-071 Encinas        39           6          0.15</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="diferencias-entre-primer-y-segundo-partido-9" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>
<p>No podemos comparar el número de votos en dos municipios cuando la diferencia en censados electorales es muy alta. Pero si podemos medir el porcentaje de participación que, por lo dicho en el ejemplo interior, en censos más pequeños hay participación más alta. Si la participación es más alta, ¿el número de votos a las candidaturas es proporcional también? ¿O hay distinto porcentaje de votos nulos votos y votos en blanco en municipios más grandes? Es decir, ¿el porcentaje de votos no destinados a las candidaturas depende del censo?</p>
<p>Vemos es la distribución censal por cuantil y el porcentaje medio de participación, dividido por el porcentaje de votos a las candidaturas, de votos en blanco y de votos nulos (porcentajes medidos como votos -de esas tres categorías- sobre el censo). Vemos cómo la participación baja según aumenta el censo en las poblaciones, pero el porcentaje de votos nulos no sigue esa distribución.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-71-1.png" width="960" class="r-stretch"></section>
<section id="diferencias-entre-primer-y-segundo-partido-10" class="slide level2">
<h2>Diferencias entre primer y segundo partido</h2>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-72-1.png" width="960" class="r-stretch"></section>
<section id="nivel-de-participación-y-favorecidos" class="slide level2">
<h2>Nivel de participación y favorecidos</h2>
<p>En las elecciones se suele especular con que si una alta/baja participación a cierre de urnas o en alguno de los avances favorece a unos bloques políticos u otros. Analizaremos elección a elección los resultados y niveles de participación.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-73-1.png" width="960" class="r-stretch"></section>
<section id="nivel-de-participación-y-favorecidos-1" class="slide level2">
<h2>Nivel de participación y favorecidos</h2>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-74-1.png" width="960" class="r-stretch"></section>
<section id="nivel-de-participación-y-favorecidos-2" class="slide level2">
<h2>Nivel de participación y favorecidos</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 110 × 6
   censo_quantile siglas_ganador     n p_participacion p_participacion_1
            &lt;int&gt; &lt;fct&gt;          &lt;int&gt;           &lt;dbl&gt;             &lt;dbl&gt;
 1              8 PSOE            1995           0.748             0.388
 2             10 PNV              132           0.693             0.396
 3              7 PNV              143           0.684             0.384
 4              8 PNV               97           0.705             0.398
 5              3 PP              3063           0.774             0.414
 6              6 PNV              107           0.692             0.400
 7              4 PP              2877           0.769             0.417
 8              5 PP              2516           0.765             0.414
 9              3 PNV               34           0.645             0.364
10              5 PNV               94           0.697             0.391
# ℹ 100 more rows
# ℹ 1 more variable: p_participacion_2 &lt;dbl&gt;</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 49219</code></pre>
</div>
</div>
</section>
<section id="nivel-de-participación-y-favorecidos-3" class="slide level2">
<h2>Nivel de participación y favorecidos</h2>
<p>Supongamos que existe una relación directa entre censo del municipio y tipo de área: rural o urbana o zonas intermedias.</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-76-1.png" width="960" class="r-stretch"><p>Se aprecia que en las comunidades 09, 13 y 14 la distribución de votos se la llevan partidos políticos que no responden al bipartidismo.</p>
</section>
<section id="nivel-de-participación-y-favorecidos-4" class="slide level2">
<h2>Nivel de participación y favorecidos</h2>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-77-1.png" width="960" class="r-stretch"></section>
<section id="nivel-de-participación-y-favorecidos-5" class="slide level2">
<h2>Nivel de participación y favorecidos</h2>
<p>este está repe</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-78-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-79-1.png" width="960"></p>
</div>
</div>
</section></section>
<section>
<section id="fin" class="title-slide slide level1 center">
<h1>FIN</h1>

</section>
<section id="parte-de-mario" class="slide level2">
<h2>Parte de Mario</h2>
<p>Como no tenemos manera de deshacer un empate de votos, permitimos tener más de un partido en primera posición. En estos casos, todos los partidos que estén en primera posición ocuparán tanto el primer como el segundo puesto.</p>
<p>Así:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion  
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 2019-11 01-04-021 01          PP        49 Más votado
2 2019-11 01-04-021 01          PSOE      49 Más votado
# A tibble: 2 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion          
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;             
1 2019-11 01-04-021 01          PP        49 Segundo más votado
2 2019-11 01-04-021 01          PSOE      49 Segundo más votado</code></pre>
</div>
</div>
<p>O así:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion  
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 2015-12 07-19-010 07          PP         2 Más votado
2 2015-12 07-19-010 07          PSOE       2 Más votado
3 2015-12 07-19-010 07          VOX        2 Más votado
4 2015-12 07-19-010 07          C's        2 Más votado
# A tibble: 4 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion          
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;             
1 2015-12 07-19-010 07          PP         2 Segundo más votado
2 2015-12 07-19-010 07          PSOE       2 Segundo más votado
3 2015-12 07-19-010 07          VOX        2 Segundo más votado
4 2015-12 07-19-010 07          C's        2 Segundo más votado</code></pre>
</div>
</div>
<p>Vemos la relación entre el partido más votado y el segundo, teniendo en cuenta todos los municipios para todas las elecciones. Visualmente se aprecia que cuando el PP queda en primer lugar el partido que más veces está en segundo puesto es el PSOE. Y viceversa. Cuando el PSOE ocupa la primera posición en votos el partido que más veces está tras él es el PP.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-82-1.png" width="960"></p>
</div>
</div>
<p>Vemos un pequeño flujo residual que va de PSOE en primera posición a PSOE en segunda posición. Esto se debe a los casos de empate en el partido más votado donde decidíamos poner a ambos partidos como primer y segundo partido más votado.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-83-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  fecha   cod_mun   codigo_ccaa siglas votos posicion  
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 2008-03 01-18-094 01          PP       907 Más votado
2 2008-03 01-18-094 01          PSOE     907 Más votado</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  fecha   media
  &lt;ord&gt;   &lt;dbl&gt;
1 2008-03 0.761
2 2011-11 0.760
3 2015-12 0.762
4 2016-06 0.762
5 2019-04 0.762
6 2019-11 0.762
# A tibble: 28 × 7
# Groups:   2008-03, 2011-11, 2015-12, 2016-06, 2019-04 [25]
   `2008-03` `2011-11` `2015-12` `2016-06` `2019-04` `2019-11`     n
       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;
 1         0         0         0         0         0         0  1867
 2         0         0         0         0         0         1     5
 3         0         0         0         0         1         0     2
 4         0         0         0         0         1         1    11
 5         0         0         0         0        NA        NA     1
 6         0         0         0         1         0         0     1
 7         0         0         0         1         1         1     2
 8         0         0         1         1         1         1    22
 9         0         0        NA        NA        NA        NA     2
10         0         1         0         1         1         1     1
11         0         1         1         1         1         1    23
12         0         1         1         1        NA        NA     1
13         1         0         0         0         0         0    29
14         1         0         1         1         0         0     1
15         1         1         0         0         0         0    12
16         1         1         0         1         0         0     1
17         1         1         1         0         0         0     3
18         1         1         1         1         0         0    10
19         1         1         1         1         1         0     3
20         1         1         1         1         1         1  6114
21         1         1         1         1        NA         1     1
22        NA         0         0         0         0         0     2
23        NA         1         1         1         1         1     2
24        NA        NA         0         0         0         0     2
25        NA        NA         1         1         1         1     7
26        NA        NA        NA         1         1         1     2
27        NA        NA        NA        NA         0         0     1
28        NA        NA        NA        NA         1         1     7</code></pre>
</div>
</div>
<p><strong>HIGHLIGHT</strong></p>
<p>El municipio de Cesuras (La Coruña) tiene datos solo para 2008-03 y 2011-11 a pesar de tener un censo y censo electoral superior a 2.000.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  fecha   cod_mun   municipio censo votos_candidaturas
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;     &lt;dbl&gt;              &lt;dbl&gt;
1 2008-03 11-15-026 Cesuras    2089               1435
2 2011-11 11-15-026 Cesuras    2025               1396</code></pre>
</div>
</div>
<p>Esto es debido a que en 2013 se crea el municipio Oza-Cesuras como fusión de los municipios de Oza de los Ríos y Cesuras.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
# Groups:   fecha, cod_mun [3]
  fecha   cod_mun   codigo_ccaa siglas votos posicion           lag_votos
  &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;
1 2008-03 01-04-003 01          PP      7632 Más votado                NA
2 2008-03 01-04-003 01          PSOE    4261 Segundo más votado      3371
3 2008-03 01-04-006 01          PSOE    2802 Más votado                NA
4 2008-03 01-04-006 01          PP      2226 Segundo más votado       576
5 2008-03 01-04-011 01          PSOE    1360 Más votado                NA
6 2008-03 01-04-011 01          PP       730 Segundo más votado       630</code></pre>
</div>
</div>
<p>La distribución de la diferencia de votos para estos mismos municipios.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-88-1.png" width="960"></p>
</div>
</div>
<p>La distribución del logaritmo de la diferencia de votos sigue una distribución normal y mucho más visual que la distribucion original que nos permite la búsqueda de outliers.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-89-1.png" width="960"></p>
</div>
</div>
<p>Para determinar los municipios-fecha con mayor diferencia de voto podemos medir esta diferencia de forma absoluta o de forma relativa.</p>
<ul>
<li>Absoluta: máximo número en bruto en diferencia de votos.<br>
</li>
<li>Relativa: máxima diferencia de votos medida sobre los censados electorales.</li>
</ul>
<p>Esta segunda forma relativiza la diferencia de votos en función del tamaño de la muestra. Ya que en municipios con mayor censo se espera mayor diferencia en votos.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-90-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<pre><code>## # A tibble: 5 × 7
##   fecha cod_mun municipio  censo lag_votos dif_votos_absoluta dif_votos_relativa
##   &lt;ord&gt; &lt;glue&gt;  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
## 1 2011… 12-28-… Madrid    2.29e6    442069             442069              0.193
## 2 2016… 12-28-… Madrid    2.36e6    329278             329278              0.139
## 3 2015… 12-28-… Madrid    2.37e6    270065             270065              0.114
## 4 2008… 12-28-… Madrid    2.26e6    228121             228121              0.101
## 5 2008… 09-08-… Barcelona 1.16e6    184449             184449              0.159
## # A tibble: 5 × 7
##   fecha  cod_mun municipio censo lag_votos dif_votos_absoluta dif_votos_relativa
##   &lt;ord&gt;  &lt;glue&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
## 1 2008-… 01-41-… Cañada R…  2516      1698               1698              0.675
## 2 2008-… 01-41-… Luisiana…  3605      1961               1961              0.544
## 3 2011-… 01-41-… Cañada R…  2626      1393               1393              0.530
## 4 2019-… 01-41-… Cañada R…  2692      1322               1322              0.491
## 5 2019-… 01-41-… Cañada R…  2703      1323               1323              0.490</code></pre>
</div>
<p>El top cuatro de mayor diferencia absoluta en votos pertenencen al municipio 12-28-079 (Madrid). Es decir, Madrid ha tenido la mayor diferencia absoluta de votos entre el primer y el segundo partido más votado en las cuatro elecciones más antiguas.</p>
<p>De los cinco casos con mayor diferencia absoluta de votos cuatro de ellos son del municipio 01-41-901 (Cañada Rosal).</p>
<p>Observando para cada municipio solo su registro con mayor diferencia de votos absoluta/relativa, el ranking queda de la siguiente manera.</p>
<div class="cell">
<pre><code>## # A tibble: 5 × 7
##   fecha cod_mun municipio  censo lag_votos dif_votos_absoluta dif_votos_relativa
##   &lt;ord&gt; &lt;glue&gt;  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
## 1 2011… 12-28-… Madrid    2.29e6    442069             442069              0.193
## 2 2008… 09-08-… Barcelona 1.16e6    184449             184449              0.159
## 3 2011… 17-46-… València  5.74e5    123301             123301              0.215
## 4 2011… 15-30-… Murcia    3.06e5    111669             111669              0.365
## 5 2019… 01-41-… Sevilla   5.40e5     61413              61413              0.114
## # A tibble: 5 × 7
##   fecha  cod_mun municipio censo lag_votos dif_votos_absoluta dif_votos_relativa
##   &lt;ord&gt;  &lt;glue&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
## 1 2008-… 01-41-… Cañada R…  2516      1698               1698              0.675
## 2 2008-… 01-41-… Luisiana…  3605      1961               1961              0.544
## 3 2011-… 07-45-… Menasalb…  2273      1087               1087              0.478
## 4 2008-… 01-23-… Villanue…  2668      1224               1224              0.459
## 5 2011-… 17-03-… Cox        4798      2169               2169              0.452</code></pre>
</div>
<p>Observando en cada elección el municipio con máxima diferencia en votos absoluta/relativa.</p>
<div class="cell">
<pre><code>## # A tibble: 6 × 7
##   fecha cod_mun municipio  censo lag_votos dif_votos_absoluta dif_votos_relativa
##   &lt;ord&gt; &lt;glue&gt;  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
## 1 2008… 12-28-… Madrid    2.26e6    228121             228121             0.101 
## 2 2011… 12-28-… Madrid    2.29e6    442069             442069             0.193 
## 3 2015… 12-28-… Madrid    2.37e6    270065             270065             0.114 
## 4 2016… 12-28-… Madrid    2.36e6    329278             329278             0.139 
## 5 2019… 12-28-… Madrid    2.37e6    113158             113158             0.0477
## 6 2019… 01-41-… Sevilla   5.40e5     38475              38475             0.0713
## # A tibble: 6 × 7
##   fecha  cod_mun municipio censo lag_votos dif_votos_absoluta dif_votos_relativa
##   &lt;ord&gt;  &lt;glue&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
## 1 2008-… 01-41-… Cañada R…  2516      1698               1698              0.675
## 2 2011-… 01-41-… Cañada R…  2626      1393               1393              0.530
## 3 2015-… 01-21-… San Bart…  2614      1002               1002              0.383
## 4 2016-… 01-41-… Marinale…  2195       937                937              0.427
## 5 2019-… 01-41-… Cañada R…  2703      1323               1323              0.490
## 6 2019-… 01-41-… Cañada R…  2692      1322               1322              0.491</code></pre>
</div>
<p>Como resumen de los rankings anteriores podemoss decir que las máximas diferencias absolutas en votos pertenecen a las grandes ciudades y suele ser Madrid el municpio que presenta la máxima diferencia, sobre todo en elecciones más antiguas (la diferencia relativa en votos ha ido reduciéndose en cada elección). La diferencia relativa en votos es mayor en municipios donde el censo es más bajo.</p>
<p>¿Tendrá algo que ver el porcentaje de voto con los resultados electorales? Miramos primero aquellos municipios y provincias con mayor porcentaje de voto.</p>
</section></section>
<section>
<section id="mario-creo-que-acá-queda-mejor-un-solo-gráfico-de-barras-con-2-colores-uno-encima-del-otro-como-el-chunk-36" class="title-slide slide level1 center">
<h1>Mario creo que acá queda mejor un solo gráfico de barras, con 2 colores uno encima del otro (como el chunk 36)</h1>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-95-1.png" width="960"></p>
</div>
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-95-2.png" width="960"></p>
</div>
</div>
<p>Aunque a mayor censo electoral el porcentaje de voto es menor, el porcentaje de votos nulos no parece seguir ninguna tendencia en función del censo. Al igual que con la diferencia de votos, podemos mirar obtener el ranking de votos nulos en frecuencia absoluta o relativa. E igual que antes, la mayor frecuencia absoluta la encontramos en Madrid y Barcelona (con un porcentaje de votos nulos casi inexistente) y la mayor frecuencia relativa la vemos en municipios con muy poco censo electoral.</p>
<p></p>
<div class="cell">
<pre><code>## # A tibble: 5 × 6
##   fecha   cod_mun   municipio   censo votos_nulos p_votos_nulos
##   &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;
## 1 2011-11 12-28-079 Madrid    2290453       16527          0.01
## 2 2019-04 12-28-079 Madrid    2374370       13585          0.01
## 3 2019-11 12-28-079 Madrid    2384269       11810          0   
## 4 2011-11 09-08-019 Barcelona 1143219       10716          0.01
## 5 2016-06 12-28-079 Madrid    2363829       10570          0
## # A tibble: 5 × 6
##   fecha   cod_mun   municipio   censo votos_nulos p_votos_nulos
##   &lt;ord&gt;   &lt;glue&gt;    &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;
## 1 2019-04 08-37-368 Villasdardo    17           4          0.24
## 2 2019-11 02-50-214 Pomer          18           4          0.22
## 3 2019-11 08-09-310 Reinoso        15           3          0.2 
## 4 2019-04 08-34-241 Villodre       18           3          0.17
## 5 2019-11 08-40-071 Encinas        39           6          0.15</code></pre>
</div>
<p>No podemos comparar el número de votos en dos municipios cuando la diferencia en censados electorales es muy alta. Pero si podemos medir el porcentaje de participación que, por lo dicho en el ejemplo interior, en censos más pequeños hay participación más alta. Si la participación es más alta, ¿el número de votos a las candidaturas es proporcional también? ¿O hay distinto porcentaje de votos nulos votos y votos en blanco en municipios más grandes? Es decir, ¿el porcentaje de votos no destinados a las candidaturas depende del censo?</p>
<p>Vemos es la distribución censal por cuantil y el porcentaje medio de participación, dividido por el porcentaje de votos a las candidaturas, de votos en blanco y de votos nulos (porcentajes medidos como votos -de esas tres categorías- sobre el censo). Vemos cómo la participación baja según aumenta el censo en las poblaciones, pero el porcentaje de votos nulos no sigue esa distribución.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-97-1.png" width="960"></p>
</div>
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-97-2.png" width="960"></p>
</div>
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-97-3.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-98-1.png" width="960"></p>
</div>
</div>
<p></p>
</section>
<section id="nivel-de-participación-y-favorecidos-6" class="slide level2">
<h2>Nivel de participación y favorecidos</h2>
<p>En toda elección surgen los rumores sobre si una baja participación favorece a la derecha o a la izquierda, para combatir a esos rumores analizaremos elección a elección los resultados y niveles de participación.</p>
<p>Tras interiorizar las tendencias del porcentaje de votos en las distintas fechas, ¿vemos cambios en los resultados electores según el porcentaje de voto?</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-99-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-100-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-101-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 110 × 6
   censo_quantile siglas_ganador     n p_participacion p_participacion_1
            &lt;int&gt; &lt;fct&gt;          &lt;int&gt;           &lt;dbl&gt;             &lt;dbl&gt;
 1              8 PSOE            1995           0.748             0.388
 2             10 PNV              132           0.693             0.396
 3              7 PNV              143           0.684             0.384
 4              8 PNV               97           0.705             0.398
 5              3 PP              3063           0.774             0.414
 6              6 PNV              107           0.692             0.400
 7              4 PP              2877           0.769             0.417
 8              5 PP              2516           0.765             0.414
 9              3 PNV               34           0.645             0.364
10              5 PNV               94           0.697             0.391
# ℹ 100 more rows
# ℹ 1 more variable: p_participacion_2 &lt;dbl&gt;</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 49219</code></pre>
</div>
</div>
<p>Supongamos que existe una relación directa entre censo del municipio y tipo de área: rural o urbana o zonas intermedias.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-103-1.png" width="960"></p>
</div>
</div>
<p>Se aprecia que en las comunidades 09, 13 y 14 la distribución de votos se la llevan partidos políticos que no responden al bipartidismo.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-104-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-105-1.png" width="960"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-106-1.png" width="960"></p>
</div>
</div>
</section>
<section id="continuación" class="slide level2">
<h2>Continuación</h2>
<p></p>
</section>
<section id="bipartidismo-en-las-cámaras" class="slide level2">
<h2>Bipartidismo en las cámaras</h2>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-108-1.png" width="960"></p>
</div>
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-108-2.png" width="960"></p>
</div>
</div>
<p></p>
</section>
<section id="diferencias-entre-primer-y-segundo-lugar" class="slide level2">
<h2>Diferencias entre primer y segundo lugar</h2>
<p>Ahora, para evaluar estas diferencias entre el primer y el segundo lugar, y evidenciar la distribución espacial de disparidad entre los partidos, se realizó una búsqueda de municipios, provincias y comunidades autónomas en que la disparidad bipartidista es mayor.</p>
</section>
<section id="caso-municipios" class="slide level2">
<h2>Caso municipios</h2>
<p>Para el caso de los municipios, se evaluó aquellos donde el porcentaje de disparidad sea mayor al 50%.</p>
<p>En 71 oportunidades, la diferencia entre el primer partido más votado y el siguiente fue mayor al 50%, esto se distribuye de la siguiente forma por votación:</p>
<div class="cell">

<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  fecha   n_de_municipios
  &lt;ord&gt;             &lt;int&gt;
1 2008-03              20
2 2011-11              31
3 2015-12               3
4 2016-06               5
5 2019-04               6
6 2019-11               6</code></pre>
</div>
</div>
<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-110-1.png" width="960" class="r-stretch"><p></p>
</section>
<section id="diferencias-a-nivel-provincial" class="slide level2">
<h2>Diferencias a nivel provincial</h2>
<p>A nivel provincial, se buscaron aquellas provincias con una diferencia mayor al 25%.</p>
<p>En 27 oportunidades, la diferencia entre el primer partido más votado y el siguiente fue mayor al 25%, esto se distribuye de la siguiente forma por votación:</p>
<div class="cell">

<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  fecha   n_de_provincias
  &lt;ord&gt;             &lt;int&gt;
1 2008-03               4
2 2011-11              18
3 2016-06               4
4 2019-11               1</code></pre>
</div>
</div>
<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-112-1.png" width="960" class="r-stretch"></section>
<section id="diferencias-a-nivel-comunidad-autónoma" class="slide level2">
<h2>Diferencias a nivel comunidad autónoma</h2>
<p>Finalmente, en una escala más macro, dado que las diferencias al momento de aumentar la escala son menores, se buscaron aquellas donde la diferencia entre el primer y el segundo lugar sea mayor al 20%.</p>
<p>En 27 oportunidades, la diferencia entre el primer partido más votado y el siguiente fue mayor al 25%, esto se distribuye de la siguiente forma por votación:</p>
<div class="cell">

<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  fecha   n_de_comunidades
  &lt;ord&gt;              &lt;int&gt;
1 2008-03                2
2 2011-11               12
3 2015-12                2
4 2016-06                3
5 2019-04                1
6 2019-11                1</code></pre>
</div>
</div>
<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-114-1.png" width="960" class="r-stretch"><p></p>
</section>
<section id="votos-nulos" class="slide level2">
<h2>Votos nulos</h2>
<p>El voto nulo siempre es un llamado de atención a los políticos, debido a que es una contrarrespuesta a las opciones ofrecidas en las urnas. Al momento de evaluar los municipios que en el promedio de las 6 votaciones evaluadas, poseen los mayores valores de votos nulos, el resultado es el siguiente:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   municipio                `promedio(%)`
   &lt;chr&gt;                            &lt;dbl&gt;
 1 Reinoso                          13.0 
 2 Villodre                         11.0 
 3 Encinas                          10.1 
 4 Fresneda de la Sierra             9.43
 5 Villasdardo                       8.56
 6 Arraya de Oca                     7.7 
 7 Velilla de los Ajos               7.69
 8 Cerbón                            7.6 
 9 Valdevacas de Montejo             7.6 
10 Pomer                             6.99
11 Tabanera de Valdavia              6.45
12 Villanueva de la Condesa          6.07
13 Muduex                            6.02
14 Valleruela de Pedraza             5.89
15 Moríñigo                          5.88
16 Pobladura de Valderaduey          5.65
17 Puebla de Arganzón, La            5.64
18 Matilla la Seca                   5.53
19 Fontihoyuelo                      5.5 
20 San Esteban de los Patos          5.4 </code></pre>
</div>
</div>
<p></p>
</section></section>
<section>
<section id="participación" class="title-slide slide level1 center">
<h1>Participación</h1>
<p>El número de votos siempre se ha mantenido por encima de 23754401 votos pero, ¿cuánto ha supuesto este número de votos sobre el total de la población?</p>
<p>Comparando la participación con el censo para cada una de las elecciones:</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-116-1.png" width="960" class="r-stretch"><p>El número de censados aumenta y la participación parece que va a la baja, aunque con seis evaluaciones no se puede afirmar con seguridad. Al comienzo de 2019 hay un repunte de la participación, pero de nuevo vuelve a bajar, posiblemente por el “aburrimiento” de volver a votar en ese mismo año.</p>
<p></p>
</section>
<section id="peso-de-no-votantes-versus-el-total-de-votos" class="slide level2">
<h2>Peso de no votantes versus el total de votos</h2>
<p>Miramos el peso que han tenido las personas censadas que no han votado versus el total de votos por cada una de las elecciones.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-117-1.gif"></p>
</div>
</div>
<p>Al igual que al inicio veíamos los votos recibidos por cada partida, ahora incluímos ese <em>no voto</em> como una representatividad más.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-118-1.png" width="960"></p>
</div>
</div>
<p></p>
</section></section>
<section>
<section id="participación-mario-dejaría-lo-tuyo-en-vez-de-esto" class="title-slide slide level1 center">
<h1>Participación MARIO: dejaría lo tuyo en vez de esto</h1>
<p>En contraste a lo anterior, los municipios que poseen un mayor porcentaje de participación en las urnas, son los siguientes:</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-120-1.png" width="960" class="r-stretch"><p>Se puede evidenciar que la participación es mayor en los municipios de menor tamaño poblacional, y que ésta decrece a medida que la población del municipio aumenta.</p>
<p></p>
</section>
<section id="municipios-de-mayor-participación" class="slide level2">
<h2>Municipios de mayor participación</h2>
<p>Al momento de evaluar solo aquellos municipios correspondientes al 30% de mayor participación, los resultados apuntan a lo siguiente:</p>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-121-1.png" width="960" class="r-stretch"><p>Se evidencia que el PP sale triunfante en todas las elecciones en los municipios donde hay mayor participación.</p>
<p></p>
</section>
<section id="menor-participación" class="slide level2">
<h2>Menor participación</h2>
<p>Por otro lado, al momento de evaluar aquellos municipios correspondientes al 30% donde hay una menor participación, que se condicen con ser los municipios de mayor población, los resultados apuntan a lo siguiente:</p>
<div class="cell">

<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
# Groups:   fecha [6]
  fecha   partido_baja_partic votos_baja_partic
  &lt;ord&gt;   &lt;fct&gt;                           &lt;dbl&gt;
1 2008-03 PSOE                         10975260
2 2011-11 PP                           10693855
3 2015-12 PP                            7002801
4 2016-06 PP                            7680771
5 2019-04 PSOE                          7406590
6 2019-11 PSOE                          6681810</code></pre>
</div>
</div>
<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-122-1.png" width="960" class="r-stretch"><p>En aquellos municipios con menor participación, los partidos triunfadores son el PP y el PSOE según la votación.</p>
<p></p>
</section>
<section id="partidos-beneficiados-por-menor-y-mayor-participación" class="slide level2">
<h2>Partidos beneficiados por menor y mayor participación</h2>
<p>Por otro lado, al revisar aquellos municipios donde hay una alta participación, se evidencia lo siguiente:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
# Groups:   fecha [6]
  fecha   partido_baja_partic votos_baja_partic partido_alta_partic
  &lt;ord&gt;   &lt;fct&gt;                           &lt;dbl&gt; &lt;fct&gt;              
1 2008-03 PSOE                         10975260 PP                 
2 2011-11 PP                           10693855 PP                 
3 2015-12 PP                            7002801 PP                 
4 2016-06 PP                            7680771 PP                 
5 2019-04 PSOE                          7406590 PP                 
6 2019-11 PSOE                          6681810 PP                 
# ℹ 1 more variable: votos_alta_partic &lt;dbl&gt;</code></pre>
</div>
</div>
<p>En base a lo anterior, se puede evidenciar que la baja participación, que ocurre en los municipios de mayor población beneficia al PSOE, mas no en todas las elecciones. Aquellos municipios de mayor población suelen ser los municipios más urbanizados, por lo tanto en aquellos municipios rurales el PP pareciera beneficiarse, y en aquellos municipios urbanizados, el PSOE es quien toma ciertas ventajas.</p>
<p></p>
</section></section>
<section>
<section id="encuestas-3" class="title-slide slide level1 center">
<h1>Encuestas</h1>
<p>Desde 2008 a 2019 se han realizado 45 encuestas, con valores muestrales que van desde 750 a 45635 personas.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-124-1.png" width="960"></p>
</div>
</div>
<p>Dado que cada votación y cada encuesta presenta valores diferentes, esto las vuelve poco calibrables para los gestores de datos, se vuelve necesario hacer un análisis al detalle de cada elección para calibrar cada una de ellas.</p>
<p></p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-125-1.png" width="960"></p>
</div>
<div class="cell-output-display">
<p><img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-125-2.png" width="960"></p>
</div>
</div>
<p></p>
</section>
<section id="encuestas-menos-precisas" class="slide level2">
<h2>Encuestas menos precisas</h2>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-126-1.png" width="960" class="r-stretch"><p>Las encuestas se equivocaron más en la elección del 2011-11, seguida del 2016-06 y 2019-11. Curiosamente en las elecciones de 2019-04 el promedio de las encuestas estuvo bastante cerca del resultado final.</p>
<p></p>
</section>
<section id="error-de-encuestas-en-partidos-de-ámbito-nacional" class="slide level2">
<h2>Error de encuestas en partidos de ámbito nacional</h2>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-127-1.png" width="960" class="r-stretch"><p>Se evidencia que las encuestas previeron resultados disímiles respecto a los partidos de ámbito nacional, como aquellas del 2019, donde al PSOE lo subestiman en abril y luego lo sobrestiman en noviembre, caso contrario para el PP en el mismo rango.</p>
<p></p>
</section>
<section id="casas-encuestadoras" class="slide level2">
<h2>Casas encuestadoras</h2>

<img data-src="Entrega_grupo7_files/figure-revealjs/unnamed-chunk-128-1.png" width="960" class="r-stretch"><p>Se puede apreciar que las casas CIS, ENCUESTAMOS y MYWORD presentan los rangos más amplios de resultados, y CELESTE-TEL la que presenta más outliers.</p>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Entrega_grupo7_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Entrega_grupo7_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Entrega_grupo7_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>